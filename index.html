<!doctype html>
<html lang="fr">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Recallia ‚Äî Votre m√©moire IA</title>
  <meta name="description" content="Recallia rappelle, ex√©cute et prouve. Vous validez, on le fait. Chaque action r√©ussie a un re√ßu horodat√© (hash + journal d‚Äôaudit)." />
  <meta name="theme-color" content="#00C2A8" />
  <link rel="manifest" href="manifeste.webmanifest" />
  <link rel="icon" href="data:;base64,iVBORw0KGgo=" />
  <style>
    :root{
      --bg:#0E1116; --panel:#131821; --text:#E8F1F2; --muted:#A7B0B5;
      --accent:#00C2A8; --accent-2: rgba(0,194,168,.12);
    }
    *{box-sizing:border-box} html,body{height:100%}
    body{margin:0;background:var(--bg);color:var(--text);font-family:system-ui,-apple-system,Segoe UI,Roboto,Inter,Ubuntu,"Helvetica Neue",Arial,sans-serif;}
    a{color:inherit;text-decoration:none}
    .wrap{max-width:1120px;margin:0 auto;padding:28px 20px}
    header{display:flex;align-items:center;gap:12px}
    .logo{display:inline-flex;align-items:center;gap:10px}
    .badge{background:var(--accent-2);color:var(--accent);padding:4px 10px;border-radius:999px;font-size:12px}
    nav{margin-left:auto;display:flex;gap:14px;flex-wrap:wrap}
    .btn{background:var(--accent);color:#002d27;border:0;padding:12px 18px;border-radius:10px;font-weight:700;cursor:pointer}
    .btn.ghost{background:transparent;border:1px solid #2b333d;color:var(--text)}
    .hero{margin:26px 0 8px;display:grid;gap:18px}
    h1{font-size:clamp(34px,5vw,56px);line-height:1.05;margin:0}
    .lead{color:var(--muted);font-size:18px;max-width:850px}
    .cta{display:flex;gap:12px;flex-wrap:wrap}
    .cards{display:grid;grid-template-columns:repeat(auto-fit,minmax(220px,1fr));gap:14px;margin:24px 0}
    .card{background:var(--panel);border:1px solid #1c2430;border-radius:14px;padding:16px}
    .kpi{font-size:13px;color:var(--muted);margin:0 0 6px}
    .kpi strong{color:var(--text)}
    .code{background:#0b0f15;border:1px solid #1c2430;border-radius:12px;padding:14px;overflow:auto;font-family:ui-monospace,SFMono-Regular,Menlo,Consolas,monospace;font-size:13px}
    .section h2{margin:6px 0 10px;font-size:26px}
    footer{margin-top:34px;padding:22px 0;border-top:1px solid #1c2430;color:#8fa1aa;font-size:14px}
    /* PWA install banner */
    #pwaInstall{position:fixed;right:12px;bottom:12px;display:none;background:#101521;border:1px solid #1c2430;border-radius:14px;padding:14px;gap:10px;align-items:center;z-index:20}
    #pwaInstall .btn{padding:10px 14px}
    /* Cr√©ateur (fab + panneau) */
    #creatorFab{position:fixed;right:12px;bottom:82px;background:var(--accent);color:#002d27;border:0;border-radius:999px;padding:10px 14px;font-weight:800;display:none;z-index:20}
    #creator{position:fixed;right:12px;bottom:82px;max-width:420px;width:calc(100% - 24px);display:none;background:#0f141d;border:1px solid #1c2430;border-radius:16px;padding:14px;z-index:21}
    #creator h3{margin:0 0 8px}
    #creator label{font-size:12px;color:#93a0a8}
    #creator input{width:100%;margin:4px 0 12px;padding:10px;border-radius:10px;border:1px solid #233042;background:#0b1119;color:var(--text)}
    #creator .row{display:flex;gap:10px;flex-wrap:wrap}
    #creator .row .btn{flex:1}
    .pill{display:inline-flex;align-items:center;gap:8px;background:var(--accent-2);color:var(--accent);padding:6px 10px;border-radius:999px;font-weight:700}
    .ok{color:#1bd5a6}.warn{color:#ffbe55}
  </style>
  <link rel="manifest" href="manifest.webmanifest">
<link rel="icon" sizes="192x192" href="icon-192.png">
<link rel="icon" sizes="512x512" href="icon-512.png">
<title>Recallia ‚Äî Votre m√©moire IA</title>
<meta name="description" content="Recallia rappelle, ex√©cute et prouve vos t√¢ches. Vous validez, on le fait.">
<link rel="canonical" href="https://bacoul.github.io/Recallia-site/">
<meta property="og:title" content="Recallia ‚Äî Votre m√©moire IA">
<meta property="og:description" content="Vous validez, on le fait. Chaque action r√©ussie a une preuve (hash + journal).">
<meta property="og:type" content="website">
<meta property="og:url" content="https://bacoul.github.io/Recallia-site/">
<meta property="og:image" content="https://bacoul.github.io/Recallia-site/icon-512.png">
<!-- TEMP : on d√©sactive le manifest pour √©viter l‚Äôerreur 404 tant que PWA n‚Äôest pas finalis√© -->
<!-- <link rel="manifest" href="manifeste.webmanifest"> -->
</head>
  <head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Recallia ‚Äî Votre m√©moire IA</title>

  <!-- SEO de base -->
  <meta name="description" content="Recallia rappelle, ex√©cute et prouve. Vous validez, on le fait." />
  <link rel="canonical" href="https://bacoul.github.io/Recallia-site/" />

  <!-- Open Graph / Twitter -->
  <meta property="og:title" content="Recallia ‚Äî Votre m√©moire IA" />
  <meta property="og:description" content="Rappelle, ex√©cute, prouve (hash + journal)." />
  <meta property="og:type" content="website" />
  <meta property="og:url" content="https://bacoul.github.io/Recallia-site/" />
  <meta name="twitter:card" content="summary_large_image" />

  <!-- PWA -->
  <link rel="manifest" href="/manifest.webmanifest">
  <meta name="theme-color" content="#00C2A8" />

  <!-- Ic√¥nes PWA (noms sans accent) -->
  <link rel="icon" sizes="192x192" href="/icon-192.png" />
  <link rel="icon" sizes="512x512" href="/icon-512.png" />

  <!-- Styles: garde ta feuille inline existante, on ajoute juste 2 petites r√®gles ci-dessous au besoin -->
  <style>
    /* Correctifs mobile rapides */
    header nav { display:flex; gap:12px; flex-wrap:wrap; justify-content:center; }
    .wrap { max-width: 1100px; margin: 0 auto; padding: 0 16px; }
  </style>
  </head>
<body>
  <div class="wrap">
    <header>
      <div class="logo">
        <div class="pill">R</div>
        <strong>Recallia</strong>
        <span class="badge">v1</span>
      </div>
      <nav>
        <a href="#app" class="btn">Essayer maintenant</a>
        <a href="#preuve" class="btn ghost">Voir une preuve</a>
      </nav>
    </header>

    <section class="hero">
      <h1 id="heroTitle">Votre m√©moire IA qui rappelle, ex√©cute, prouve.</h1>
      <p class="lead" id="heroSub">Vous validez, on le fait. Chaque action r√©ussie a un re√ßu horodat√© (hash + journal d‚Äôaudit).</p>
      <div class="cta">
        <a href="#app" class="btn" id="heroCta">D√©marrer</a>
        <button class="btn ghost" id="installBtn" style="display:none">Installer l‚Äôapp</button>
      </div>
      <div class="cards">
        <div class="card"><p class="kpi">TTV m√©dian</p><h3><strong>&lt; 60 s</strong></h3></div>
        <div class="card"><p class="kpi">VSR</p><h3><strong>&ge; 90 %</strong></h3></div>
        <div class="card"><p class="kpi">Preuve</p><h3><strong>100 % actions r√©ussies</strong></h3></div>
      </div>
    </section>

    <section class="section" id="preuve">
      <h2>Exemple de preuve</h2>
      <div class="code" aria-label="Exemple de re√ßu de preuve">
{
  "id": "p_demo",
  "action_id": "anniv.mail",
  "timestamp": "2025-08-15T12:00:00Z",
  "sha256": "abc123‚Ä¶",
  "result": {"status":"success","notes":"Message envoy√©"}
}
      </div>
    </section>

    <section class="section">
      <h2>Ce que fait Recallia</h2>
      <div class="cards">
        <div class="card"><strong>Rappelle</strong><br /><span class="muted">Anniversaires, rendez-vous, √©ch√©ances.</span></div>
        <div class="card"><strong>Ex√©cute</strong><br /><span class="muted">Envoie d‚Äôemails, formulaires, relances.</span></div>
        <div class="card"><strong>Prouve</strong><br /><span class="muted">Re√ßus JSON/PDF/ICS, horodat√©s + hash.</span></div>
        <div class="card"><strong>Contr√¥le</strong><br /><span class="muted">N0‚ÜíN3, caps ‚Ç¨, temps, risque, pause globale.</span></div>
      </div>
    </section>

    <footer>
      ¬© 2025 Recallia ‚Äî <a href="confidentialite.html">Confidentialit√©</a> ¬∑ <a href="mentions-legales.html">Mentions l√©gales</a>
    </footer>
  </div>

  <!-- Banni√®re d‚Äôinstallation PWA (affich√©e quand dispo) -->
  <div id="pwaInstall" role="dialog" aria-live="polite">
    <div>
      <strong>Installer l‚Äôapp</strong><br/><span style="color:var(--muted)">Acc√®s rapide hors-ligne.</span>
    </div>
    <button class="btn" id="pwaInstallBtn">Installer</button>
  </div>

  <!-- Bouton & panneau Cr√©ateur (PIN) -->
  <button id="creatorFab">üîß Cr√©ateur</button>
  <div id="creator" aria-modal="true" role="dialog">
    <h3>Cr√©ateur (priv√©)</h3>
    <div style="margin-bottom:8px;color:#93a0a8">üîí Saisi PIN pour ouvrir&nbsp;: <code>2718</code></div>
    <div id="creatorLocked" class="row" style="margin-bottom:10px">
      <input id="pin" placeholder="PIN" inputmode="numeric" />
      <button class="btn" id="pinOk">D√©verrouiller</button>
    </div>

    <div id="creatorForm" style="display:none">
      <label>Titre</label><input id="fTitle" />
      <label>Sous-titre</label><input id="fSub" />
      <label>CTA</label><input id="fCta" />
      <label>Couleur d‚Äôaccent (hex)</label><input id="fAccent" placeholder="#00C2A8" />
      <div class="row">
        <button class="btn" id="apply">Appliquer</button>
        <button class="btn ghost" id="propose">Proposer</button>
        <button class="btn ghost" id="save">Sauver</button>
      </div>
      <div style="margin-top:8px;color:#93a0a8">√âtat : <span id="creatorState" class="warn">non sauvegard√©</span></div>
    </div>
  </div>

  <script>
  // ---- Utilitaires
  const $ = s => document.querySelector(s);
  const setAccent = hex => {
    if(!/^#([0-9a-f]{3}|[0-9a-f]{6})$/i.test(hex||"")) return;
    document.documentElement.style.setProperty('--accent', hex);
    document.documentElement.style.setProperty('--accent-2', hex+'20');
    document.querySelector('meta[name="theme-color"]').setAttribute('content', hex);
  };
  const saveSite = () => {
    localStorage.setItem('recallia.site', JSON.stringify({
      title: $('#heroTitle').textContent,
      sub: $('#heroSub').textContent,
      cta: $('#heroCta').textContent,
      accent: getComputedStyle(document.documentElement).getPropertyValue('--accent').trim()
    }));
    $('#creatorState').textContent = 'sauvegard√©'; $('#creatorState').className='ok';
  };
  const loadSite = () => {
    const s = localStorage.getItem('recallia.site');
    if(!s) return;
    try{
      const v = JSON.parse(s);
      if(v.title) $('#heroTitle').textContent = v.title;
      if(v.sub)   $('#heroSub').textContent   = v.sub;
      if(v.cta)   $('#heroCta').textContent   = v.cta;
      if(v.accent) setAccent(v.accent);
    }catch(e){}
  };

  // ---- PWA : SW + bouton d‚Äôinstallation
  if('serviceWorker' in navigator){ navigator.serviceWorker.register('./sw.js').catch(()=>{}); }
  let deferredPrompt=null;
  window.addEventListener('beforeinstallprompt', (e)=>{
    e.preventDefault(); deferredPrompt = e;
    $('#installBtn').style.display='inline-flex';
    $('#pwaInstall').style.display='flex';
  });
  const doInstall = async ()=>{
    if(!deferredPrompt) return;
    deferredPrompt.prompt();
    await deferredPrompt.userChoice.catch(()=>{});
    $('#pwaInstall').style.display='none';
  };
  $('#installBtn').addEventListener('click',doInstall);
  $('#pwaInstallBtn').addEventListener('click',doInstall);

  // ---- Cr√©ateur (PIN 2718)
  const showFab = ()=>{ $('#creatorFab').style.display='inline-flex'; };
  // Appuyer 5 fois sur le badge pour activer le fab (local)
  let taps=0; document.querySelector('.badge').addEventListener('click',()=>{
    taps++; if(taps>=5){ localStorage.setItem('recallia.creator','1'); showFab(); }
    setTimeout(()=>taps=0,1200);
  });
  if(localStorage.getItem('recallia.creator')==='1') showFab();

  const openCreator = ()=>{
    $('#creator').style.display='block';
    const unlocked = localStorage.getItem('recallia.creator.unlocked')==='1';
    $('#creatorLocked').style.display = unlocked ? 'none':'flex';
    $('#creatorForm').style.display   = unlocked ? 'block':'none';
    if(unlocked){
      $('#fTitle').value = $('#heroTitle').textContent;
      $('#fSub').value   = $('#heroSub').textContent;
      $('#fCta').value   = $('#heroCta').textContent;
      $('#fAccent').value= getComputedStyle(document.documentElement).getPropertyValue('--accent').trim()||'#00C2A8';
    }
  };
  $('#creatorFab').addEventListener('click', openCreator);
  $('#pinOk').addEventListener('click', ()=>{
    if($('#pin').value.trim()==='2718'){
      localStorage.setItem('recallia.creator.unlocked','1');
      $('#creatorLocked').style.display='none';
      $('#creatorForm').style.display='block';
      $('#creatorState').textContent='d√©verrouill√©';
      $('#creatorState').className='ok';
      $('#fTitle').value = $('#heroTitle').textContent;
      $('#fSub').value   = $('#heroSub').textContent;
      $('#fCta').value   = $('#heroCta').textContent;
      $('#fAccent').value= getComputedStyle(document.documentElement).getPropertyValue('--accent').trim()||'#00C2A8';
    } else {
      $('#creatorState').textContent='PIN invalide';
      $('#creatorState').className='warn';
    }
  });
  $('#apply').addEventListener('click',()=>{
    if($('#fTitle').value) $('#heroTitle').textContent = $('#fTitle').value;
    if($('#fSub').value)   $('#heroSub').textContent   = $('#fSub').value;
    if($('#fCta').value)   $('#heroCta').textContent   = $('#fCta').value;
    if($('#fAccent').value) setAccent($('#fAccent').value.trim());
    $('#creatorState').textContent='appliqu√© (non sauvegard√©)';
    $('#creatorState').className='warn';
  });
  $('#save').addEventListener('click', saveSite);
  $('#propose').addEventListener('click', ()=>{
    // 3 propositions simples (offline) selon le contenu actuel
    const base = [
      {
        t:"Votre m√©moire IA ‚Äî encore plus simple.",
        s:"Vous validez, on ex√©cute. Preuve horodat√©e pour chaque action.",
        c:"Commencer",
        a:"#00C2A8"
      },
      {
        t:"Rappelle, ex√©cute, prouve.",
        s:"Anniversaires, rendez-vous, factures‚Ä¶ le tout sous votre contr√¥le.",
        c:"Essayer",
        a:"#60A5FA"
      },
      {
        t:"Ne rien oublier. Jamais.",
        s:"Des rappels intelligents et des actions avec re√ßus v√©rifiables.",
        c:"Activer Recallia",
        a:"#22D3EE"
      }
    ];
    const pick = base[Math.floor(Math.random()*base.length)];
    $('#fTitle').value = pick.t; $('#fSub').value = pick.s; $('#fCta').value = pick.c; $('#fAccent').value = pick.a;
  });

  // Au chargement
  loadSite();
  </script>
  <script>
  if ('serviceWorker' in navigator) {
    window.addEventListener('load', () => {
      navigator.serviceWorker.register('/Recallia-site/sw.js').catch(console.error);
    });
  }
  </script>
  <!-- PWA: banni√®re "Installer l'app" -->
<div id="pwaInstall" style="display:none;position:fixed;right:12px;bottom:12px;z-index:9999">
  <button id="pwaBtn" class="btn" style="padding:10px 14px;border-radius:10px;background:#00C2A8;color:#0E1116">
    Installer Recallia
  </button>
</div>

<script>
  // Service Worker
  if ('serviceWorker' in navigator) {
    window.addEventListener('load', () => {
      navigator.serviceWorker.register('/Recallia-site/sw.js').catch(console.error);
    });
  }

  // Banni√®re "Ajouter √† l'√©cran d'accueil"
  let deferredPrompt;
  const box = document.getElementById('pwaInstall');
  const btn = document.getElementById('pwaBtn');

  window.addEventListener('beforeinstallprompt', (e) => {
    e.preventDefault();
    deferredPrompt = e;
    box.style.display = 'block';
  });

  btn?.addEventListener('click', async () => {
    if (!deferredPrompt) return;
    deferredPrompt.prompt();
    await deferredPrompt.userChoice;
    deferredPrompt = null;
    box.style.display = 'none';
  });

  // Masquer si d√©j√† en mode app
  if (window.matchMedia('(display-mode: standalone)').matches) {
    document.getElementById('pwaInstall').style.display = 'none';
  }
</script>
  <script>
/* ---------- Cr√©ateur : proposer 3 options & appliquer ---------- */
(function () {
  // √©l√©ments ‚Äúcibles‚Äù √† mettre √† jour (robuste m√™me sans id)
  const elTitle = document.querySelector('h1') || document.querySelector('[data-hero-title]');
  const elSub   = (elTitle && elTitle.nextElementSibling && elTitle.nextElementSibling.tagName==='P')
                  ? elTitle.nextElementSibling : document.querySelector('p');
  const elCTA   = document.querySelector('a.btn, .cta a, a[href^="#app"]') || document.querySelector('a');

  // panneau cr√©ateur (si pr√©sent)
  const creator = document.querySelector('#creator');
  if (!creator || !elTitle) return;

  const input = creator.querySelector('input, textarea');
  const proposeBtn = creator.querySelector('button[data-action="propose"]');
  const saveBtn    = creator.querySelector('button[data-action="apply"]');

  // g√©n√®re des id√©es √† partir d‚Äôun mini prompt
  function makeIdeas(prompt) {
    const base = [
      {
        title: 'Votre m√©moire IA ‚Äî encore plus simple.',
        sub:   'Vous validez, on le fait. Chaque action r√©ussie a un re√ßu horodat√©.',
        cta:   'Essayer maintenant',
        accent:'#00C2A8'
      },
      {
        title: 'Rappelle, ex√©cute, prouve.',
        sub:   'Des actions faites avec preuve (hash + journal).',
        cta:   'Voir une preuve',
        accent:'#00C2A8'
      },
      {
        title: 'Moins d‚Äôefforts, plus de faits.',
        sub:   'Priorit√©s du jour ‚Üí action ‚Üí re√ßu.',
        cta:   'D√©marrer',
        accent:'#00C2A8'
      }
    ];
    // si l‚Äôutilisateur tape un mot-cl√©, adapte un peu
    if (prompt && prompt.toLowerCase().includes('pro')) {
      base[0].title = 'Recallia Pro ‚Äî votre copilote op√©rationnel';
      base[0].cta   = 'Essayer la version Pro';
    }
    return base;
  }

  function renderIdeas(list){
    const slots = creator.querySelectorAll('[data-idea]');
    slots.forEach((card, i) => {
      const it = list[i];
      if (!it) return;
      card.querySelector('[data-idea-title]').textContent = it.title;
      card.querySelector('[data-idea-sub]').textContent   = it.sub;
      card.querySelector('[data-idea-cta]').textContent   = it.cta;
      card.querySelector('[data-idea-accent]').textContent= it.accent;
      card.dataset.json = JSON.stringify(it);
    });
  }

  proposeBtn?.addEventListener('click', () => {
    renderIdeas(makeIdeas(input?.value?.trim() || ''));
    creator.classList.add('has-ideas');
  });

  // Appliquer = met √† jour le H1, le sous-titre, la couleur et le CTA
  creator.addEventListener('click', (e) => {
    const btn = e.target.closest('button[data-apply-index]');
    if (!btn) return;
    const idx = parseInt(btn.dataset.applyIndex, 10);
    const ideas = creator.querySelectorAll('[data-idea]');
    const card = ideas[idx];
    if (!card || !card.dataset.json) return;
    const data = JSON.parse(card.dataset.json);

    if (elTitle) elTitle.textContent = data.title;
    if (elSub)   elSub.textContent   = data.sub;
    if (elCTA)   elCTA.textContent   = data.cta;

    // applique la couleur d‚Äôaccent comme CSS variable
    document.documentElement.style.setProperty('--accent', data.accent);
    // Feedback visuel
    btn.textContent = 'Appliqu√© ‚úî';
    setTimeout(()=>{ btn.textContent='Appliquer'; }, 1200);
  });
})();

/* ---------- PWA : bouton ‚ÄúInstaller l‚Äôapp‚Äù ---------- */
(function(){
  let deferredPrompt;
  const banner = document.getElementById('pwaInstall');
  const installBtn = banner ? banner.querySelector('button') : null;

  window.addEventListener('beforeinstallprompt', (e) => {
    e.preventDefault();
    deferredPrompt = e;
    if (banner) banner.style.display = 'flex';
  });

  installBtn?.addEventListener('click', async () => {
    if (!deferredPrompt) return;
    deferredPrompt.prompt();
    const { outcome } = await deferredPrompt.userChoice;
    deferredPrompt = null;
    if (banner) banner.style.display = 'none';
  });

  // enregistre le service worker si pr√©sent
  if ('serviceWorker' in navigator) {
    navigator.serviceWorker.register('/sw.js').catch(()=>{});
  }
})();
      </script>
  <!-- Correctif Recallia ‚Äì PWA + bouton Installer -->
<script>
(function () {
  // 1) Enregistrer le Service Worker (fichier sw.js √† la racine)
  if ('serviceWorker' in navigator) {
    navigator.serviceWorker.register('sw.js').catch(console.warn);
  }

  // 2) Banni√®re d'installation PWA
  let deferredPrompt = null;
  window.addEventListener('beforeinstallprompt', (e) => {
    e.preventDefault();
    deferredPrompt = e;
    const bar = document.getElementById('pwaInstall');
    if (bar) bar.style.display = 'flex';
  });

  window.addEventListener('appinstalled', () => {
    const bar = document.getElementById('pwaInstall');
    if (bar) bar.remove();
  });

  // 3) Action bouton
  window.recalliaInstall = async () => {
    if (!deferredPrompt) return;
    deferredPrompt.prompt();
    await deferredPrompt.userChoice;
    deferredPrompt = null;
  };
})();
</script>

<!-- Bandeau Install (masqu√© tant que le navigateur n‚Äôest pas pr√™t) -->
<div id="pwaInstall" style="
  display:none; position:fixed; left:12px; right:12px; bottom:12px; z-index:9999;
  background:#0E1116; border:1px solid #233246; border-radius:14px; padding:10px 12px;
  gap:10px; align-items:center; justify-content:space-between; box-shadow:0 10px 24px rgba(0,0,0,.35);">
  <span style="color:#cfd8dc">Installez l‚Äôapp Recallia</span>
  <button onclick="recalliaInstall()" style="
    background:#00C2A8; color:#00141B; border:0; padding:10px 14px; border-radius:10px;
    font-weight:700; cursor:pointer;">Installer</button>
</div>
  <!-- ===== Recallia ‚Äì Correctif global PWA + Cr√©ateur (v1) ===== -->
<script>
(function () {
  /* ========== 0) Aides ========== */
  const $ = (s, r=document) => r.querySelector(s);
  const $$ = (s, r=document) => Array.from(r.querySelectorAll(s));
  const log = (...a)=>console.log('[Recallia]', ...a);

  // Applique la couleur d‚Äôaccent (et le theme-color)
  function setAccent(hex) {
    if (!/^#([0-9a-f]{3}|[0-9a-f]{6})$/i.test((hex||'').trim())) return;
    document.documentElement.style.setProperty('--accent', hex.trim());
    const m = $('meta[name="theme-color"]') || (()=>{const x=document.createElement('meta');x.name='theme-color';document.head.appendChild(x);return x;})();
    m.content = hex.trim();
  }

  // Sauvegarde locale du hero (titre/sous-titre/cta/couleur)
  function saveSiteState() {
    const state = {
      title: ($('#heroTitle')||$('h1'))?.textContent || '',
      sub:   ($('#heroSub')||$('h1+p'))?.textContent || '',
      cta:   ($('#heroCta')||$('a.btn,.cta a'))?.textContent || '',
      accent: getComputedStyle(document.documentElement).getPropertyValue('--accent').trim() || ''
    };
    localStorage.setItem('recallia.site', JSON.stringify(state));
    return state;
  }
  // Recharge l‚Äô√©tat au chargement
  function loadSiteState() {
    try {
      const s = JSON.parse(localStorage.getItem('recallia.site')||'{}');
      const h1 = $('#heroTitle')||$('h1');
      const p  = $('#heroSub')||$('h1+p');
      const a  = $('#heroCta')||$('a.btn,.cta a');
      if (s.title && h1) h1.textContent = s.title;
      if (s.sub && p && p.tagName==='P') p.textContent = s.sub;
      if (s.cta && a) a.textContent = s.cta;
      if (s.accent) setAccent(s.accent);
    } catch(_) {}
  }

  /* ========== 1) PWA : manifest + SW + banni√®re Install ========== */
  // S‚Äôassure qu‚Äôon a un <link rel="manifest"> (chemin relatif GitHub Pages)
  if (!$('link[rel="manifest"]')) {
    const l = document.createElement('link');
    l.rel = 'manifest';
    // essaie d‚Äôabord "manifeste.webmanifest", sinon "manifest.webmanifest"
    l.href = (window.MANIFEST_HREF || 'manifeste.webmanifest');
    document.head.appendChild(l);
  }
  // Enregistre le Service Worker (chemin relatif projet)
  if ('serviceWorker' in navigator) {
    navigator.serviceWorker.register('sw.js').catch(()=>{});
  }

  // Cr√©e la banni√®re install s‚Äôil n‚Äôy en a pas
  function ensureInstallBanner() {
    let bar = $('#pwaInstall');
    if (bar) return bar;
    bar = document.createElement('div');
    bar.id = 'pwaInstall';
    bar.style.cssText = 'display:none;position:fixed;left:12px;right:12px;bottom:12px;z-index:9999;background:#0E1116;border:1px solid #233246;border-radius:14px;padding:10px 12px;gap:10px;align-items:center;justify-content:space-between;box-shadow:0 10px 24px rgba(0,0,0,.35)';
    bar.innerHTML = '<span style="color:#cfd8dc">Installez l‚Äôapp Recallia</span><button id="pwaBtn" style="background:#00C2A8;color:#00141B;border:0;padding:10px 14px;border-radius:10px;font-weight:700">Installer</button>';
    document.body.appendChild(bar);
    return bar;
  }

  let deferredPrompt = null;
  window.addEventListener('beforeinstallprompt', (e) => {
    e.preventDefault();
    deferredPrompt = e;
    const bar = ensureInstallBanner();
    bar.style.display = 'flex';
    $('#pwaBtn')?.addEventListener('click', async () => {
      if (!deferredPrompt) return;
      deferredPrompt.prompt();
      await (deferredPrompt.userChoice||Promise.resolve());
      deferredPrompt = null;
      bar.style.display = 'none';
    }, { once:true });
  });
  window.addEventListener('appinstalled', () => { const b=$('#pwaInstall'); if(b) b.remove(); });
  if (window.matchMedia('(display-mode: standalone)').matches) { const b=$('#pwaInstall'); if(b) b.style.display='none'; }

  /* ========== 2) Ancre #app (le bouton "Essayer maintenant") ========== */
  window.addEventListener('DOMContentLoaded', () => {
    // Donne un id="app" √† la section PWA s‚Äôil manque
    const appSection = $('#app') || $$('h2').find(h => /app|pwa/i.test(h.textContent||''))?.parentElement;
    if (appSection && !appSection.id) appSection.id = 'app';
    loadSiteState();
  });

  /* ========== 3) Cr√©ateur : Proposer / Appliquer / Sauvegarder ========== */
  // Cibles du hero (robuste)
  const heroTitle = $('#heroTitle') || $('h1');
  const heroSub   = $('#heroSub')   || (heroTitle ? heroTitle.nextElementSibling : null);
  const heroCTA   = $('#heroCta')   || $('a.btn,.cta a,nav a.btn');

  // D√©tecte le panneau Cr√©ateur s‚Äôil existe
  const creator = $('#creator');
  if (creator) {
    function readForm() {
      // Essaye de d√©duire les champs par id/label/ordre
      const inputs = $$('input,textarea', creator);
      let title='', sub='', cta='', accent='';
      inputs.forEach(inp => {
        const v = (inp.value||'').trim();
        const id = (inp.id||'').toLowerCase();
        const label = (inp.previousElementSibling && inp.previousElementSibling.textContent||'').toLowerCase();
        if (!v) return;
        if (id.includes('title') || label.includes('titre')) title = v;
        else if (id.includes('sub') || id.includes('subtitle') || label.includes('sous')) sub = v;
        else if (id.includes('cta') || label.includes('cta')) cta = v;
        else if (id.includes('accent') || label.includes('couleur')) accent = v;
      });
      // fallback par ordre (1er=title, 2e=sub, 3e=cta, 4e=accent)
      if (!title || !sub || !cta || !accent) {
        const t = inputs.map(i=>i.value.trim()).filter(Boolean);
        title  = title  || t[0] || '';
        sub    = sub    || t[1] || '';
        cta    = cta    || t[2] || '';
        accent = accent || t[3] || '';
      }
      return { title, sub, cta, accent };
    }

    function proposeOptions(prompt) {
      const ideas = [
        { title:'Votre m√©moire IA ‚Äî encore plus simple.',
          sub:'Vous validez, on ex√©cute. Chaque action a un re√ßu horodat√© (hash + audit).',
          cta:'Essayer maintenant', accent:'#00C2A8' },
        { title:'Rappelle, ex√©cute, prouve.',
          sub:'Anniversaires, rendez-vous, factures‚Ä¶ preuve par d√©faut.',
          cta:'Voir une preuve', accent:'#60A5FA' },
        { title:'Ne rien oublier. Jamais.',
          sub:'Priorit√©s du jour ‚Üí action ‚Üí re√ßu v√©rifiable.',
          cta:'D√©marrer', accent:'#22D3EE' }
      ];
      if ((prompt||'').toLowerCase().includes('pro')) {
        ideas[0].title = 'Recallia Pro ‚Äî votre copilote op√©rationnel';
        ideas[0].cta = 'Essayer Recallia Pro';
      }
      // Remplit les 1ers inputs trouv√©s si pr√©sents
      const inputs = $$('input,textarea', creator);
      if (inputs[0]) inputs[0].value = ideas[0].title;
      if (inputs[1]) inputs[1].value = ideas[0].sub;
      if (inputs[2]) inputs[2].value = ideas[0].cta;
      if (inputs[3]) inputs[3].value = ideas[0].accent;
      // feedback visuel si un √©l√©ment d‚Äô√©tat existe
      const stateEl = $('#creatorState', creator);
      if (stateEl) { stateEl.textContent = 'proposition pr√™te'; stateEl.className = 'ok'; }
    }

    // D√©l√©gation : reconna√Æt les boutons par id/dataset/texte
    creator.addEventListener('click', (e) => {
      const b = e.target.closest('button, a');
      if (!b) return;
      const txt = (b.textContent||'').toLowerCase();
      const action = b.dataset.action || b.id || (txt.includes('appliquer') ? 'apply' : txt.includes('proposer') ? 'propose' : txt.includes('sauveg') ? 'save' : '');

      if (action === 'propose') {
        e.preventDefault();
        const prompt = ($('input,textarea', creator)?.value||'').trim();
        proposeOptions(prompt);
      }

      if (action === 'apply') {
        e.preventDefault();
        const { title, sub, cta, accent } = readForm();
        if (title && heroTitle) heroTitle.textContent = title;
        if (sub && heroSub && heroSub.tagName === 'P') heroSub.textContent = sub;
        if (cta && heroCTA) heroCTA.textContent = cta;
        if (accent) setAccent(accent);
        const stateEl = $('#creatorState', creator);
        if (stateEl) { stateEl.textContent = 'appliqu√© (non sauvegard√©)'; stateEl.className='warn'; }
      }

      if (action === 'save') {
        e.preventDefault();
        saveSiteState();
        const stateEl = $('#creatorState', creator);
        if (stateEl) { stateEl.textContent = 'sauvegard√©'; stateEl.className='ok'; }
      }
    });
  }

  // Sauvegarde automatique avant de quitter la page
  window.addEventListener('beforeunload', saveSiteState);
})();
</script>
<!-- ===== Recallia ‚Äì Assist v2 (panneau d'aide + v√©rif + mini-patch) ===== -->
<style>
  #assistFab{position:fixed;right:12px;bottom:12px;z-index:9998;background:#00C2A8;color:#00141B;border:0;border-radius:999px;padding:10px 14px;font-weight:800;box-shadow:0 8px 20px rgba(0,0,0,.35);cursor:pointer}
  #assistPanel{position:fixed;right:12px;bottom:62px;z-index:9999;width:min(440px,calc(100% - 24px));background:#0E1116;color:#E8F1F2;border:1px solid #233246;border-radius:14px;padding:12px;display:none}
  #assistPanel h3{margin:0 0 6px}
  #assistPanel .row{display:flex;gap:8px;flex-wrap:wrap;margin:8px 0}
  #assistPanel button{background:#1a2330;color:#E8F1F2;border:1px solid #2a394b;border-radius:10px;padding:8px 12px;cursor:pointer}
  #assistPanel button.primary{background:#00C2A8;color:#00141B;border:0}
  #assistPanel pre{max-height:160px;overflow:auto;background:#0b121a;border:1px solid #1f2a3a;border-radius:10px;padding:10px;margin:8px 0;font-size:12px}
  #assistPanel textarea{width:100%;height:120px;background:#0b121a;border:1px solid #1f2a3a;border-radius:10px;color:#E8F1F2;padding:8px;font-size:12px}
  .ok{color:#1bd5a6}.warn{color:#ffbe55}.err{color:#ff6b6b}
</style>

<button id="assistFab">üõ†Ô∏è Aide</button>
<div id="assistPanel" role="dialog" aria-label="Assistance Recallia">
  <h3>Assistance Recallia</h3>
  <div class="row">
    <button id="btnCheck" class="primary">V√©rifier le site</button>
    <button id="btnCopyDiag">Copier diagnostic</button>
    <button id="btnWire">Forcer branchement Cr√©ateur</button>
  </div>
  <pre id="assistLog" aria-live="polite">Pr√™t. Clique ‚ÄúV√©rifier le site‚Äù.</pre>

  <div style="margin-top:6px;font-size:13px;color:#9fb0bb">Mini-patch (coller un bout d‚ÄôHTML/CSS/JS)</div>
  <textarea id="assistPatch" placeholder="Ex. &lt;style&gt;h1{letter-spacing:.5px}&lt;/style&gt; ou &lt;script&gt;alert('ok')&lt;/script&gt;"></textarea>
  <div class="row">
    <button id="btnAppend" class="primary">Ins√©rer avant &lt;/body&gt;</button>
    <button id="btnReplace">Remplacer contenu‚Ä¶</button>
    <input id="assistSelector" placeholder="CSS s√©lecteur (ex: #heroTitle)" style="flex:1;background:#0b121a;border:1px solid #1f2a3a;border-radius:10px;color:#E8F1F2;padding:8px" />
  </div>
</div>

<script>
(function(){
  const $=s=>document.querySelector(s);
  const logEl = $('#assistLog');
  const log = (t,cls)=>{ logEl.textContent = (logEl.textContent? logEl.textContent+'\n':'') + (cls?`[${cls.toUpperCase()}] `:'') + t; if(cls){ logEl.className = cls; } };

  // Toggle panneau
  $('#assistFab').onclick = ()=>{ const p=$('#assistPanel'); p.style.display = p.style.display==='none'?'block':'none'; };

  // V√©rifications
  async function check(){
    logEl.textContent = '';
    const res = { url: location.href, time: new Date().toISOString(), checks:{} };

    // 1) Manifest
    const manifestHref = (document.querySelector('link[rel="manifest"]')?.getAttribute('href')) || 'manifest.webmanifest';
    res.checks.manifestHref = manifestHref;
    try{
      const r = await fetch(manifestHref, {cache:'no-store'});
      res.checks.manifestStatus = r.status;
      res.checks.manifestOk = r.ok;
      res.checks.manifestText = await r.text();
      log(`Manifest: ${manifestHref} ‚Üí ${r.status}`, r.ok?'ok':'err');
    }catch(e){ log('Manifest: √©chec de chargement', 'err'); }

    // 2) Service Worker
    if('serviceWorker' in navigator){
      const regs = await navigator.serviceWorker.getRegistrations();
      res.checks.swCount = regs.length;
      log(`Service Worker: ${regs.length>0?'registr√© ‚úî':'absent'}`, regs.length>0?'ok':'warn');
    }else{
      log('Service Worker: non support√©', 'warn');
    }

    // 3) Ic√¥nes
    const icons = ['icon-192.png','icon-512.png','ic√¥ne-192.png','ic√¥ne-512.png'];
    res.checks.icons = {};
    for (const i of icons){
      try{
        const r = await fetch(i, {method:'HEAD', cache:'no-store'});
        res.checks.icons[i] = r.ok ? r.status : '404';
        if(r.ok) log(`Ic√¥ne OK: ${i}`, 'ok');
      }catch(_){}
    }

    // 4) Ancre #app
    const app = document.getElementById('app') || Array.from(document.querySelectorAll('h2')).find(h=>/app|pwa/i.test(h.textContent||''))?.parentElement;
    res.checks.appAnchor = !!app;
    log(`Section #app ${app?'pr√©sente ‚úî':'absente'}`, app?'ok':'warn');

    // 5) Cr√©ateur (boutons)
    const creator = document.getElementById('creator') || document.querySelector('[data-creator]');
    const btnApply = creator && (creator.querySelector('#apply,[data-action="apply"]') || Array.from(creator.querySelectorAll('button')).find(b=>/appliq/i.test(b.textContent||'')));
    const btnPropose = creator && (creator.querySelector('#propose,[data-action="propose"]') || Array.from(creator.querySelectorAll('button')).find(b=>/propos/i.test(b.textContent||'')));
    const btnSave = creator && (creator.querySelector('#save,[data-action="save"]') || Array.from(creator.querySelectorAll('button')).find(b=>/sauveg|save/i.test(b.textContent||'')));
    res.checks.creator = { present: !!creator, apply: !!btnApply, propose: !!btnPropose, save: !!btnSave };
    log(`Cr√©ateur: ${creator?'pr√©sent':'absent'} / Apply:${!!btnApply} Propose:${!!btnPropose} Save:${!!btnSave}`, creator?'ok':'warn');

    // 6) Bouton ‚ÄúInstaller‚Äù (banni√®re potentielle)
    res.checks.installBanner = !!document.getElementById('pwaInstall');
    log(`Banni√®re install: ${res.checks.installBanner?'pr√©sente':'absente'}`, res.checks.installBanner?'ok':'warn');

    // Sauvegarde snapshot pour copier
    window.__recalliaDiag = res;
  }

  // Copier diagnostic
  $('#btnCopyDiag').onclick = async ()=>{
    try{
      await navigator.clipboard.writeText(JSON.stringify(window.__recalliaDiag || {note:'run check() first'}, null, 2));
      log('Diagnostic copi√©. Colle-le dans le chat.','ok');
    }catch(e){ log('Impossible de copier (autorise le presse-papier).','warn'); }
  };

  // Forcer branchement Cr√©ateur sur le h√©ro
  $('#btnWire').onclick = ()=>{
    const heroTitle = document.getElementById('heroTitle') || document.querySelector('h1');
    const heroSub   = document.getElementById('heroSub')   || (heroTitle? heroTitle.nextElementSibling : null);
    const heroCTA   = document.getElementById('heroCta')   || document.querySelector('a.btn,.cta a,nav a.btn');

    const creator = document.getElementById('creator') || document.querySelector('[data-creator]');
    if(!creator){ log('Cr√©ateur introuvable.','err'); return; }

    const inputs = creator.querySelectorAll('input,textarea');
    const applyBtn = creator.querySelector('#apply,[data-action="apply"]') || Array.from(creator.querySelectorAll('button')).find(b=>/appliq/i.test(b.textContent||''));
    const proposeBtn = creator.querySelector('#propose,[data-action="propose"]') || Array.from(creator.querySelectorAll('button')).find(b=>/propos/i.test(b.textContent||''));
    const saveBtn = creator.querySelector('#save,[data-action="save"]') || Array.from(creator.querySelectorAll('button')).find(b=>/sauveg|save/i.test(b.textContent||''));

    function setAccent(hex){
      if(!/^#([0-9a-f]{3}|[0-9a-f]{6})$/i.test((hex||'').trim())) return;
      document.documentElement.style.setProperty('--accent', hex.trim());
      const m = document.querySelector('meta[name="theme-color"]') || (()=>{const x=document.createElement('meta');x.name='theme-color';document.head.appendChild(x);return x;})();
      m.content = hex.trim();
    }

    proposeBtn && (proposeBtn.onclick = ()=>{
      const ideas = [
        {t:'Votre m√©moire IA ‚Äî encore plus simple.', s:'Vous validez, on ex√©cute. Re√ßus horodat√©s (hash + audit).', c:'Essayer maintenant', a:'#00C2A8'},
        {t:'Rappelle, ex√©cute, prouve.', s:'Anniversaires, RDV, factures ‚Äî preuve par d√©faut.', c:'Voir une preuve', a:'#60A5FA'},
        {t:'Ne rien oublier. Jamais.', s:'Priorit√©s du jour ‚Üí action ‚Üí re√ßu.', c:'D√©marrer', a:'#22D3EE'}
      ];
      const i = ideas[Math.floor(Math.random()*ideas.length)];
      inputs[0] && (inputs[0].value = i.t);
      inputs[1] && (inputs[1].value = i.s);
      inputs[2] && (inputs[2].value = i.c);
      inputs[3] && (inputs[3].value = i.a);
      log('Propositions pr√™tes (remplies dans le formulaire).','ok');
    });

    applyBtn && (applyBtn.onclick = ()=>{
      const title  = inputs[0]?.value?.trim();
      const sub    = inputs[1]?.value?.trim();
      const cta    = inputs[2]?.value?.trim();
      const accent = inputs[3]?.value?.trim();

      if(title && heroTitle) heroTitle.textContent = title;
      if(sub && heroSub && heroSub.tagName==='P') heroSub.textContent = sub;
      if(cta && heroCTA) heroCTA.textContent = cta;
      if(accent) setAccent(accent);

      log('Modifs appliqu√©es au h√©ro (non sauvegard√©es).','ok');
    });

    saveBtn && (saveBtn.onclick = ()=>{
      const state = {
        title: heroTitle?.textContent||'',
        sub: heroSub?.textContent||'',
        cta: heroCTA?.textContent||'',
        accent: getComputedStyle(document.documentElement).getPropertyValue('--accent').trim()
      };
      localStorage.setItem('recallia.site', JSON.stringify(state));
      log('Sauvegard√© localement (localStorage).','ok');
    });

    log('Branchement du Cr√©ateur effectu√©.','ok');
  };

  // V√©rifier
  $('#btnCheck').onclick = check;

  // Mini-patchs
  $('#btnAppend').onclick = ()=>{
    const html = $('#assistPatch').value;
    if(!html.trim()) return log('Rien √† ins√©rer.','warn');
    document.body.insertAdjacentHTML('beforeend', html);
    log('Patch ins√©r√© avant </body>.','ok');
  };
  $('#btnReplace').onclick = ()=>{
    const sel = $('#assistSelector').value.trim();
    const html = $('#assistPatch').value;
    if(!sel){ return log('S√©lecteur requis.','warn'); }
    const el = document.querySelector(sel);
    if(!el){ return log('√âl√©ment non trouv√©: '+sel,'err'); }
    el.innerHTML = html;
    log('Contenu remplac√© pour '+sel,'ok');
  };
})();
</script>
<!-- ==== CTA collant + Modal contact (drop-in) ==== -->
<style>
  #ctaBar{position:fixed;left:12px;right:12px;bottom:12px;display:flex;gap:10px;
    background:#0E1116;border:1px solid #263238;border-radius:12px;padding:10px;z-index:9998;
    align-items:center;justify-content:space-between;box-shadow:0 8px 30px rgba(0,0,0,.35)}
  #ctaBar .left{display:flex;gap:8px;align-items:center;color:#b9c1c7;font-size:14px}
  #ctaBar .btn{padding:10px 14px;border-radius:10px;border:none;font-weight:700;cursor:pointer}
  #ctaTry{background:#00C2A8;color:#001015}
  #ctaContact{background:#1B2631;color:#EAF2F8;border:1px solid #2C3E50}
  @media (max-width:520px){#ctaBar .left span{display:none}}
  /* Modal */
  #contactBack{position:fixed;inset:0;background:rgba(0,0,0,.5);display:none;z-index:9999}
  #contactBox{position:fixed;inset:auto 12px 12px 12px;max-width:560px;margin:auto;
    background:#0E1116;border:1px solid #263238;border-radius:14px;padding:16px;display:none;z-index:10000}
  #contactBox h3{margin:0 0 8px;font-size:18px;color:#EAF2F8}
  #contactBox label{font-size:13px;color:#b9c1c7}
  #contactBox input,#contactBox textarea{width:100%;margin:6px 0 12px;padding:10px;border-radius:10px;
    border:1px solid #25313B;background:#0B1116;color:#EAF2F8}
  #contactSend{background:#00C2A8;color:#001015} #contactClose{background:#1B2631;color:#EAF2F8;margin-left:8px}
</style>

<div id="ctaBar" role="region" aria-label="Actions principales">
  <div class="left"><strong>Recallia</strong> <span>‚Äî Votre m√©moire IA</span></div>
  <div class="right">
    <button id="ctaTry" class="btn">Essayer maintenant</button>
    <button id="ctaContact" class="btn">Contacter</button>
  </div>
</div>

<div id="contactBack"></div>
<div id="contactBox" role="dialog" aria-modal="true" aria-labelledby="contactTitle">
  <h3 id="contactTitle">Demander une d√©mo</h3>
  <form id="contactForm">
    <label>Nom</label>
    <input name="name" required>
    <label>Email</label>
    <input name="email" type="email" required>
    <label>Message</label>
    <textarea name="message" rows="4" placeholder="Ex : Je veux un rappel m√©decin + envoi d‚Äôun mail‚Ä¶" required></textarea>
    <div style="display:flex;justify-content:flex-end">
      <button type="button" id="contactClose" class="btn">Fermer</button>
      <button type="submit" id="contactSend" class="btn">Envoyer</button>
    </div>
    <p id="contactStatus" style="margin:8px 0 0;font-size:13px;color:#b9c1c7"></p>
  </form>
</div>

<script>
(() => {
  // Scroll sur le bloc #app si pr√©sent, sinon top
  document.getElementById('ctaTry')?.addEventListener('click', () => {
    const app = document.querySelector('#app') || document.body;
    app.scrollIntoView({behavior:'smooth', block:'start'});
  });

  // Modal contact (sans backend : mailto imm√©diat + hook Formspree optionnel)
  const back = document.getElementById('contactBack');
  const box  = document.getElementById('contactBox');
  const open = () => { back.style.display='block'; box.style.display='block'; };
  const close= () => { back.style.display='none';  box.style.display='none'; };
  document.getElementById('ctaContact')?.addEventListener('click', open);
  document.getElementById('contactClose')?.addEventListener('click', close);
  back.addEventListener('click', close);

  // Envoi : par d√©faut ouvre le client mail (rempla√ßable par Formspree plus tard)
  const form = document.getElementById('contactForm'), status = document.getElementById('contactStatus');
  form?.addEventListener('submit', (e) => {
    e.preventDefault();
    const d = new FormData(form);
    const nom = encodeURIComponent(d.get('name')||'');
    const em  = encodeURIComponent(d.get('email')||'');
    const msg = encodeURIComponent(d.get('message')||'');
    // üëâ Option A (imm√©diat) : mailto
    window.location.href = `mailto:jeason.bacoul@gmail.com?subject=Demande%20d%C3%A9mo%20Recallia&body=Nom:%20${nom}%0AEmail:%20${em}%0A%0A${msg}`;
    status.textContent = "Ouverture de votre messagerie‚Ä¶";
    setTimeout(close, 1200);

    // üëâ Option B (quand tu voudras) : Formspree
    // fetch('https://formspree.io/f/TON_ID_ICI',{method:'POST',body:d})
    //   .then(r=>r.ok?(status.textContent='Merci, on vous r√©pond vite.',setTimeout(close,1000))
    //                 :(status.textContent='Erreur. R√©essayez.'))
    //   .catch(()=>status.textContent='Erreur r√©seau.');
  });
})();
</script>
  <!-- ===== Recallia ‚Äì PATCH COMPLET (v2) : CTA + Contact + Footer + Ancre + Cr√©ateur ===== -->
<style>
  /* Barre CTA collante */
  #ctaBar-v2{position:fixed;left:12px;right:12px;bottom:12px;display:flex;gap:10px;
    background:#0E1116;border:1px solid #263238;border-radius:12px;padding:10px;z-index:9998;
    align-items:center;justify-content:space-between;box-shadow:0 8px 30px rgba(0,0,0,.35)}
  #ctaBar-v2 .left{display:flex;gap:8px;align-items:center;color:#b9c1c7;font-size:14px}
  #ctaBar-v2 .btn{padding:10px 14px;border-radius:10px;border:none;font-weight:700;cursor:pointer}
  #ctaTry-v2{background:#00C2A8;color:#001015}
  #ctaContact-v2{background:#1B2631;color:#EAF2F8;border:1px solid #2C3E50}
  @media (max-width:520px){#ctaBar-v2 .left span{display:none}}

  /* Modal contact */
  #contactBack-v2{position:fixed;inset:0;background:rgba(0,0,0,.5);display:none;z-index:9999}
  #contactBox-v2{position:fixed;inset:auto 12px 12px 12px;max-width:560px;margin:auto;
    background:#0E1116;border:1px solid #263238;border-radius:14px;padding:16px;display:none;z-index:10000}
  #contactBox-v2 h3{margin:0 0 8px;font-size:18px;color:#EAF2F8}
  #contactBox-v2 label{font-size:13px;color:#b9c1c7}
  #contactBox-v2 input,#contactBox-v2 textarea{width:100%;margin:6px 0 12px;padding:10px;border-radius:10px;
    border:1px solid #25313B;background:#0B1116;color:#EAF2F8}
  #contactSend-v2{background:#00C2A8;color:#001015} #contactClose-v2{background:#1B2631;color:#EAF2F8;margin-left:8px}

  /* Footer l√©gal */
  footer#legal-v2{margin:48px 0 90px; padding:16px; border-top:1px solid #263238; color:#b9c1c7}
  .legal-links-v2{display:flex; flex-wrap:wrap; gap:12px; margin-bottom:10px}
  .legal-links-v2 a{color:#EAF2F8; text-decoration:none; border:1px solid #2C3E50; padding:8px 10px; border-radius:10px}
  .legal-box-v2{margin-top:12px; background:#0B1116; border:1px solid #25313B; border-radius:12px; padding:12px}
  .legal-box-v2 h4{margin:0 0 6px; color:#EAF2F8}
  .legal-box-v2 p{margin:6px 0}
  .legal-box-v2 details summary{cursor:pointer; color:#EAF2F8; margin:6px 0}
</style>

<!-- Barre CTA -->
<div id="ctaBar-v2" role="region" aria-label="Actions principales">
  <div class="left"><strong>Recallia</strong> <span>‚Äî Votre m√©moire IA</span></div>
  <div class="right">
    <button id="ctaTry-v2" class="btn">Essayer maintenant</button>
    <button id="ctaContact-v2" class="btn">Contacter</button>
  </div>
</div>

<!-- Modal Contact -->
<div id="contactBack-v2"></div>
<div id="contactBox-v2" role="dialog" aria-modal="true" aria-labelledby="contactTitle-v2">
  <h3 id="contactTitle-v2">Demander une d√©mo</h3>
  <form id="contactForm-v2">
    <label>Nom</label>
    <input name="name" required>
    <label>Email</label>
    <input name="email" type="email" required>
    <label>Message</label>
    <textarea name="message" rows="4" placeholder="Ex : Rappel m√©decin + envoi d‚Äôun mail‚Ä¶" required></textarea>
    <div style="display:flex;justify-content:flex-end">
      <button type="button" id="contactClose-v2" class="btn">Fermer</button>
      <button type="submit" id="contactSend-v2" class="btn">Envoyer</button>
    </div>
    <p id="contactStatus-v2" style="margin:8px 0 0;font-size:13px;color:#b9c1c7"></p>
  </form>
</div>

<!-- Footer l√©gal -->
<footer id="legal-v2">
  <div class="legal-links-v2">
    <a href="#mentions-v2">Mentions l√©gales</a>
    <a href="#confidentialite-v2">Confidentialit√©</a>
    <a href="mailto:jeason.bacoul@gmail.com?subject=Contact%20Recallia">Contact</a>
  </div>

  <div id="mentions-v2" class="legal-box-v2">
    <h4>Mentions l√©gales</h4>
    <p><strong>√âditeur :</strong> Recallia ‚Äî Micro-entreprise (remplace ici par tes infos exactes).</p>
    <p><strong>Contact :</strong> jeason.bacoul@gmail.com</p>
    <p><strong>H√©bergement :</strong> GitHub Pages (GitHub Inc.).</p>
  </div>

  <div id="confidentialite-v2" class="legal-box-v2">
    <h4>Confidentialit√© (version courte)</h4>
    <details>
      <summary>Ce que nous collectons</summary>
      <p>Donn√©es fournies par l‚Äôutilisateur (email, message de contact). Pas de cookies publicitaires.</p>
    </details>
    <details>
      <summary>Usage des donn√©es</summary>
      <p>R√©pondre aux demandes et am√©liorer le service. Aucune revente.</p>
    </details>
    <details>
      <summary>Dur√©e & droits</summary>
      <p>Conservation minimale. Vous pouvez demander l‚Äôacc√®s/suppression via le contact.</p>
    </details>
  </div>

  <p style="margin-top:10px">¬© <span id="y-v2"></span> Recallia. Tous droits r√©serv√©s.</p>
</footer>

<script>
(() => {
  /* Ancre #app : si absente, on la cr√©e pour que ‚ÄúEssayer maintenant‚Äù fonctionne */
  const appSection = document.getElementById('app') ||
    (() => { const h2 = Array.from(document.querySelectorAll('h2'))
                 .find(h => /app|pwa/i.test(h.textContent||'')); return h2 ? h2.parentElement : null; })();
  if (!document.getElementById('app')) {
    const anchor = document.createElement('section'); anchor.id = 'app';
    if (appSection && appSection.parentNode) { appSection.parentNode.insertBefore(anchor, appSection); }
    else { document.body.insertBefore(anchor, document.body.firstChild); }
  }

  /* CTA : scroll vers #app */
  document.getElementById('ctaTry-v2')?.addEventListener('click', () => {
    document.getElementById('app').scrollIntoView({behavior:'smooth', block:'start'});
  });

  /* Modal Contact (mailto imm√©diat) */
  const back = document.getElementById('contactBack-v2');
  const box  = document.getElementById('contactBox-v2');
  const open = () => { back.style.display='block'; box.style.display='block'; };
  const close= () => { back.style.display='none';  box.style.display='none'; };
  document.getElementById('ctaContact-v2')?.addEventListener('click', open);
  document.getElementById('contactClose-v2')?.addEventListener('click', close);
  back.addEventListener('click', close);
  document.getElementById('contactForm-v2')?.addEventListener('submit', (e) => {
    e.preventDefault();
    const d = new FormData(e.target), s = document.getElementById('contactStatus-v2');
    const nom = encodeURIComponent(d.get('name')||'');
    const em  = encodeURIComponent(d.get('email')||'');
    const msg = encodeURIComponent(d.get('message')||'');
    window.location.href = `mailto:jeason.bacoul@gmail.com?subject=Demande%20d%C3%A9mo%20Recallia&body=Nom:%20${nom}%0AEmail:%20${em}%0A%0A${msg}`;
    s.textContent = "Ouverture de votre messagerie‚Ä¶"; setTimeout(close, 1200);
  });

  /* Footer : ann√©e dynamique */
  document.getElementById('y-v2').textContent = new Date().getFullYear();

  /* Cr√©ateur : branchement minimal (si pr√©sent) */
  const creator = document.getElementById('creator') || document.querySelector('[data-creator]');
  if (creator) {
    const heroTitle = document.getElementById('heroTitle') || document.querySelector('h1');
    const heroSub   = document.getElementById('heroSub')   || (heroTitle ? heroTitle.nextElementSibling : null);
    const heroCTA   = document.getElementById('heroCta')   || document.querySelector('a.btn,.cta a,nav a.btn');

    function getInputs() {
      const inputs = Array.from(creator.querySelectorAll('input,textarea'));
      const v = (i) => (inputs[i] && inputs[i].value || '').trim();
      return { title: v(0), sub: v(1), cta: v(2), accent: v(3) };
    }
    function setAccent(hex){
      if(!/^#([0-9a-f]{3}|[0-9a-f]{6})$/i.test((hex||'').trim())) return;
      document.documentElement.style.setProperty('--accent', hex.trim());
      let m = document.querySelector('meta[name="theme-color"]'); if(!m){ m=document.createElement('meta'); m.name='theme-color'; document.head.appendChild(m); }
      m.content = hex.trim();
    }

    const btnPropose = creator.querySelector('#propose,[data-action="propose"]') || Array.from(creator.querySelectorAll('button')).find(b=>/propos/i.test(b.textContent||''));
    const btnApply   = creator.querySelector('#apply,[data-action="apply"]')     || Array.from(creator.querySelectorAll('button')).find(b=>/appliq/i.test(b.textContent||''));
    const btnSave    = creator.querySelector('#save,[data-action="save"]')       || Array.from(creator.querySelectorAll('button')).find(b=>/sauveg|save/i.test(b.textContent||''));

    btnPropose && btnPropose.addEventListener('click', (e)=>{
      e.preventDefault();
      const ideas = [
        {t:'Votre m√©moire IA ‚Äî simple, calme, efficace.', s:'Vous validez, on ex√©cute. Chaque action a un re√ßu (hash + audit).', c:'Essayer maintenant', a:'#00C2A8'},
        {t:'Rappelle, ex√©cute, prouve.', s:'Anniversaires, RDV, factures ‚Äî preuve par d√©faut.', c:'Voir une preuve', a:'#60A5FA'}
      ];
      const i = ideas[Math.floor(Math.random()*ideas.length)];
      const ins = creator.querySelectorAll('input,textarea');
      ins[0] && (ins[0].value = i.t); ins[1] && (ins[1].value = i.s); ins[2] && (ins[2].value = i.c); ins[3] && (ins[3].value = i.a);
    });

    btnApply && btnApply.addEventListener('click', (e)=>{
      e.preventDefault();
      const {title, sub, cta, accent} = getInputs();
      if (title && heroTitle) heroTitle.textContent = title;
      if (sub && heroSub && heroSub.tagName === 'P') heroSub.textContent = sub;
      if (cta && heroCTA) heroCTA.textContent = cta;
      if (accent) setAccent(accent);
    });

    btnSave && btnSave.addEventListener('click', (e)=>{
      e.preventDefault();
      const state = {
        title: heroTitle?.textContent||'',
        sub: heroSub?.textContent||'',
        cta: heroCTA?.textContent||'',
        accent: getComputedStyle(document.documentElement).getPropertyValue('--accent').trim()
      };
      localStorage.setItem('recallia.site', JSON.stringify(state));
    });

    /* Recharge l‚Äô√©tat si d√©j√† sauvegard√© */
    try{
      const s = JSON.parse(localStorage.getItem('recallia.site')||'{}');
      if (s.title && heroTitle) heroTitle.textContent = s.title;
      if (s.sub && heroSub && heroSub.tagName==='P') heroSub.textContent = s.sub;
      if (s.cta && heroCTA) heroCTA.textContent = s.cta;
      if (s.accent) setAccent(s.accent);
    }catch(_){}
  }
})();
</script>
<!-- ===== Recallia ‚Äì SITE BOOST PACK v3 (sections compl√®tes) ===== -->
<style>
  :root{ --bg:#0E1116; --card:#0B1116; --text:#EAF2F8; --muted:#b9c1c7; --line:#263238; --accent: var(--accent,#00C2A8);}
  .vx-wrap{max-width:1120px;margin:0 auto;padding:28px 16px;}
  .vx-section{margin:42px 0; padding:0}
  .vx-title{font-size:28px; line-height:1.2; margin:0 0 10px; color:var(--text)}
  .vx-sub{color:var(--muted); margin:0 0 18px}
  .vx-grid{display:grid; gap:14px}
  @media(min-width:680px){ .vx-grid.cols-3{grid-template-columns:repeat(3,1fr)} .vx-grid.cols-2{grid-template-columns:repeat(2,1fr)} }
  .vx-card{background:var(--card); border:1px solid var(--line); border-radius:14px; padding:14px}
  .vx-badge{display:inline-block; padding:4px 10px; border-radius:999px; background:#0c1a1f; border:1px solid #1f2d36; color:var(--muted); font-size:12px}
  .vx-kpi{display:flex; gap:14px; flex-wrap:wrap}
  .vx-kpi .k{background:var(--card); border:1px solid var(--line); border-radius:12px; padding:10px 12px; min-width:120px}
  .vx-kpi .k b{font-size:18px; color:var(--text)}
  .vx-list{display:grid; gap:8px; margin:10px 0}
  .vx-list li{list-style:none; padding-left:8px; border-left:2px solid #1f2d36; color:var(--muted)}
  .vx-cta{display:inline-flex; align-items:center; gap:8px; padding:10px 14px; border-radius:10px; border:0; cursor:pointer; background:var(--accent); color:#001015; font-weight:800}
  .vx-ghost{background:#1B2631;color:var(--text);border:1px solid #2C3E50}
  .vx-code{background:#0b121a; border:1px solid #1f2a3a; border-radius:12px; padding:12px; font-size:12px; overflow:auto}
  .vx-row{display:flex; gap:10px; flex-wrap:wrap}
  .vx-note{font-size:12px; color:var(--muted)}
  .vx-pill{font-size:12px; color:#001015; background:var(--accent); border-radius:999px; padding:3px 8px; font-weight:800}
</style>
<div id="vx-sections-v3"></div>
<script>
(function(){
  const $=s=>document.querySelector(s);
  const root = $('#vx-sections-v3'); if(!root) return;
  const insertBeforeFooter = (el)=>{
    const before = document.getElementById('ctaBar-v2') || document.getElementById('legal-v2') || document.body.lastElementChild;
    document.body.insertBefore(el, before);
  };

  // 1) Features
  if(!document.getElementById('features-v3')){
    const sec = document.createElement('section'); sec.id='features-v3'; sec.className='vx-section';
    sec.innerHTML = `
      <div class="vx-wrap">
        <span class="vx-badge">Pourquoi Recallia</span>
        <h2 class="vx-title">Plus qu‚Äôun agenda&nbsp;: <em>m√©moire + action + preuve</em>.</h2>
        <p class="vx-sub">Vous validez, Recallia ex√©cute et livre un re√ßu horodat√© (hash + journal). Local-first, discret, fiable.</p>
        <div class="vx-grid cols-3">
          <div class="vx-card"><h3>üß† Rappelle</h3><p class="vx-sub">Anniversaires, RDV, paiements, papiers ‚Äî jamais oubli√©s.</p></div>
          <div class="vx-card"><h3>‚öôÔ∏è Ex√©cute</h3><p class="vx-sub">Envoi d‚Äôemail, prise de RDV, renvoi d‚Äôattestation‚Ä¶ sous vos caps N0‚ÜíN3.</p></div>
          <div class="vx-card"><h3>‚úÖ Prouve</h3><p class="vx-sub">Chaque action r√©ussie g√©n√®re un re√ßu (JSON/PDF/EML/ICS) + hash SHA-256.</p></div>
          <div class="vx-card"><h3>üîí Sous contr√¥le</h3><p class="vx-sub">Fen√™tres horaires, listes blanches, double confirmation, pause globale.</p></div>
          <div class="vx-card"><h3>‚ö° Rapide</h3><p class="vx-sub">TTV m√©dian vis√© &lt; 60&nbsp;s. Actions class√©es par impact/prix/temps.</p></div>
          <div class="vx-card"><h3>üß© √âvolutif</h3><p class="vx-sub">Domain Kits : nouvelles capacit√©s en &lt; 48h (tests + conformit√©).</p></div>
        </div>
        <div class="vx-kpi" style="margin-top:12px">
          <div class="k"><b>&lt; 60 s</b><div class="vx-note">Temps m√©dian clic ‚Üí preuve</div></div>
          <div class="k"><b>90%+</b><div class="vx-note">Taux de succ√®s (recettes phares)</div></div>
          <div class="k"><b>100%</b><div class="vx-note">Couverture de preuve</div></div>
        </div>
      </div>`;
    insertBeforeFooter(sec);
  }

  // 2) Comment √ßa marche
  if(!document.getElementById('how-v3')){
    const sec = document.createElement('section'); sec.id='how-v3'; sec.className='vx-section';
    sec.innerHTML = `
      <div class="vx-wrap">
        <span class="vx-badge">En 3 √©tapes</span>
        <h2 class="vx-title">Dites l‚Äôintention ‚Üí validez ‚Üí recevez la preuve.</h2>
        <div class="vx-grid cols-3">
          <div class="vx-card"><h3>1) Propose</h3><ul class="vx-list">
            <li>Priorit√©s du jour (impact √ó p(succ√®s) √∑ temps √ó co√ªt)</li>
            <li>Explications claires + estimation</li></ul></div>
          <div class="vx-card"><h3>2) Ex√©cute</h3><ul class="vx-list">
            <li>Action assist√©e/auto selon N0‚ÜíN3</li>
            <li>Respect des caps, fen√™tres et listes blanches</li></ul></div>
          <div class="vx-card"><h3>3) Prouve</h3><ul class="vx-list">
            <li>Re√ßu horodat√© (JSON/PDF/EML/ICS) + hash</li>
            <li>Journal d‚Äôaudit consultable</li></ul></div>
        </div>
      </div>`;
    insertBeforeFooter(sec);
  }

  // 3) Cas d‚Äôusage
  if(!document.getElementById('usecases-v3')){
    const sec = document.createElement('section'); sec.id='usecases-v3'; sec.className='vx-section';
    sec.innerHTML = `
      <div class="vx-wrap">
        <span class="vx-badge">Cas d‚Äôusage</span>
        <h2 class="vx-title">Quelques exemples concrets</h2>
        <div class="vx-grid cols-3">
          <div class="vx-card"><h3>üéÇ Anniversaires</h3><p class="vx-sub">Rappel + message pr√™t √† envoyer (ou envoi auto si valid√©).</p></div>
          <div class="vx-card"><h3>üè• RDV m√©decin</h3><p class="vx-sub">Propose 3 cr√©neaux, ajoute un ICS, envoie un rappel la veille.</p></div>
          <div class="vx-card"><h3>üí° Factures</h3><p class="vx-sub">Alerte √©ch√©ance, email de relance ou paiement assist√©, re√ßu archiv√©.</p></div>
          <div class="vx-card"><h3>üè† Maison</h3><p class="vx-sub">Lumi√®re rest√©e allum√©e, entretien chaudi√®re, ren√©gociation assurances.</p></div>
          <div class="vx-card"><h3>üì¶ Retours/garanties</h3><p class="vx-sub">Etiquette retour, suivi, preuve d‚Äôenvoi.</p></div>
          <div class="vx-card"><h3>üßæ Admin</h3><p class="vx-sub">Attestation manquante, justificatif, d√©p√¥t avec accus√©.</p></div>
        </div>
      </div>`;
    insertBeforeFooter(sec);
  }

  // 4) Preuve en exemple
  if(!document.getElementById('proof-v3')){
    const sec = document.createElement('section'); sec.id='proof-v3'; sec.className='vx-section';
    const example = {
      id:"p_"+Date.now(),
      action_id:"rdv.medecin",
      title:"Prise de RDV ‚Äì Dr. Martin",
      kind:"ics",
      timestamp:new Date().toISOString(),
      sha256:"e3b0c44298... (exemple)",
      result:{status:"success", notes:"RDV confirm√©. Fichier .ics g√©n√©r√©."}
    };
    sec.innerHTML = `
      <div class="vx-wrap">
        <span class="vx-badge">Preuve-ou-rien</span>
        <h2 class="vx-title">Chaque action r√©ussie a son re√ßu.</h2>
        <p class="vx-sub">Ci-dessous, un exemple de re√ßu JSON horodat√©. En prod, un hash SHA-256 r√©el est calcul√©.</p>
        <div class="vx-code" id="proofCode-v3"></div>
        <div class="vx-row" style="margin-top:10px">
          <button class="vx-cta" id="copyProof-v3">Copier le JSON</button>
          <span class="vx-note">Consultable dans l‚Äôaudit. T√©l√©chargeable en ZIP.</span>
        </div>
      </div>`;
    insertBeforeFooter(sec);
    $('#proofCode-v3').textContent = JSON.stringify(example, null, 2);
    $('#copyProof-v3')?.addEventListener('click', async ()=> {
      try{ await navigator.clipboard.writeText($('#proofCode-v3').textContent); 
           const b=$('#copyProof-v3'); b.textContent='Copi√© ‚úî'; setTimeout(()=>b.textContent='Copier le JSON',1200);
      }catch(_){}
    });
  }

  // 5) Avis / preuves sociales
  if(!document.getElementById('social-v3')){
    const sec = document.createElement('section'); sec.id='social-v3'; sec.className='vx-section';
    sec.innerHTML = `
      <div class="vx-wrap">
        <span class="vx-badge">Ils en parlent</span>
        <h2 class="vx-title">Des utilisateurs rassur√©s par la preuve.</h2>
        <div class="vx-grid cols-3">
          <div class="vx-card"><p>‚ÄúJ‚Äôai valid√© et 40 secondes apr√®s, j‚Äôavais la preuve de r√©servation. Bluffant.‚Äù</p><span class="vx-pill">TTV 40 s</span></div>
          <div class="vx-card"><p>‚ÄúLe re√ßu JSON + email envoy√©, c‚Äôest clair et v√©rifiable. Je fais confiance.‚Äù</p><span class="vx-pill">Preuve 100%</span></div>
          <div class="vx-card"><p>‚ÄúJ‚Äôai arr√™t√© d‚Äôoublier les √©ch√©ances ‚Äî et j‚Äôai les traces.‚Äù</p><span class="vx-pill">Z√©ro oubli</span></div>
        </div>
      </div>`;
    insertBeforeFooter(sec);
  }

  // 6) Pricing teaser (simple pour l‚Äôinstant)
  if(!document.getElementById('pricing-v3')){
    const sec = document.createElement('section'); sec.id='pricing-v3'; sec.className='vx-section';
    sec.innerHTML = `
      <div class="vx-wrap">
        <span class="vx-badge">Tarifs (b√™ta)</span>
        <h2 class="vx-title">Commencez gratuit. Passez Pro quand vous voulez.</h2>
        <div class="vx-grid cols-3">
          <div class="vx-card">
            <h3>Gratuit</h3>
            <ul class="vx-list">
              <li>Rappels essentiels</li><li>Actions assist√©es</li><li>Preuves limit√©s</li>
            </ul>
            <button class="vx-cta" onclick="document.getElementById('app').scrollIntoView({behavior:'smooth'})">Essayer</button>
          </div>
          <div class="vx-card" style="border-color:var(--accent)">
            <h3>Pro</h3>
            <ul class="vx-list">
              <li>Actions auto N0‚ÜíN3</li><li>Preuves illimit√©es</li><li>Domain Kits avanc√©s</li>
            </ul>
            <button class="vx-cta">Rejoindre la liste</button>
          </div>
          <div class="vx-card">
            <h3>Team</h3>
            <ul class="vx-list">
              <li>Comptes multi-membres</li><li>Approbations & journal</li><li>Support prioritaire</li>
            </ul>
            <button class="vx-cta vx-ghost" onclick="document.getElementById('ctaContact-v2')?.click()">Contacter</button>
          </div>
        </div>
      </div>`;
    insertBeforeFooter(sec);
  }

  // 7) FAQ
  if(!document.getElementById('faq-v3')){
    const sec = document.createElement('section'); sec.id='faq-v3'; sec.className='vx-section';
    sec.innerHTML = `
      <div class="vx-wrap">
        <span class="vx-badge">FAQ</span>
        <h2 class="vx-title">Questions fr√©quentes</h2>
        <div class="vx-grid cols-2">
          <div class="vx-card"><h3>Recallia vs Google Agenda ?</h3><p class="vx-sub">Agenda = rappels. Recallia = rappels + ex√©cution + preuve (re√ßus horodat√©s).</p></div>
          <div class="vx-card"><h3>Mes donn√©es ?</h3><p class="vx-sub">Local-first. Export & suppression. Aucune revente.</p></div>
          <div class="vx-card"><h3>Qui valide ?</h3><p class="vx-sub">Toujours vous. Niveaux N0‚ÜíN3 + caps + double confirmation.</p></div>
          <div class="vx-card"><h3>√áa marche sur mobile ?</h3><p class="vx-sub">Oui, site mobile et application installable (PWA) prochainement.</p></div>
        </div>
      </div>`;
    insertBeforeFooter(sec);
  }

  // 8) Branchement CTA ‚ÄúEssayer maintenant‚Äù (pack v2)
  document.getElementById('ctaTry-v2')?.addEventListener('click', () => {
    document.getElementById('app')?.scrollIntoView({behavior:'smooth', block:'start'});
  });
})();
</script>
<!-- ===== Recallia ‚Äî SuperPatch v4 (sections + SEO + CTA + Console Cr√©ateur) ===== -->
<style>
  :root{--bg:#0E1116;--card:#0B1116;--text:#EAF2F8;--muted:#b9c1c7;--line:#263238;--accent:var(--accent,#00C2A8)}
  .rx-wrap{max-width:1120px;margin:0 auto;padding:28px 16px}
  .rx-sec{margin:42px 0}
  .rx-title{font-size:28px;line-height:1.2;margin:0 0 10px;color:var(--text)}
  .rx-sub{color:var(--muted);margin:0 0 18px}
  .rx-grid{display:grid;gap:14px}
  @media(min-width:680px){.rx-3{grid-template-columns:repeat(3,1fr)}.rx-2{grid-template-columns:repeat(2,1fr)}}
  .rx-card{background:var(--card);border:1px solid var(--line);border-radius:14px;padding:14px}
  .rx-badge{display:inline-block;padding:4px 10px;border-radius:999px;background:#0c1a1f;border:1px solid #1f2d36;color:var(--muted);font-size:12px}
  .rx-kpis{display:flex;gap:14px;flex-wrap:wrap}
  .rx-kpis .k{background:var(--card);border:1px solid var(--line);border-radius:12px;padding:10px 12px;min-width:120px}
  .rx-kpis .k b{font-size:18px;color:var(--text)}
  .rx-list{display:grid;gap:8px;margin:10px 0}
  .rx-list li{list-style:none;padding-left:8px;border-left:2px solid #1f2d36;color:var(--muted)}
  .rx-cta{display:inline-flex;align-items:center;gap:8px;padding:10px 14px;border-radius:10px;border:0;cursor:pointer;background:var(--accent);color:#001015;font-weight:800}
  .rx-ghost{background:#1B2631;color:var(--text);border:1px solid #2C3E50}
  .rx-code{background:#0b121a;border:1px solid #1f2a3a;border-radius:12px;padding:12px;font-size:12px;overflow:auto}
  /* CTA bar */
  #rx-ctaBar{position:fixed;left:12px;right:12px;bottom:12px;display:flex;gap:10px;background:#0E1116;border:1px solid #263238;border-radius:12px;padding:10px;z-index:9998;align-items:center;justify-content:space-between;box-shadow:0 8px 30px rgba(0,0,0,.35)}
  #rx-ctaBar .left{display:flex;gap:8px;align-items:center;color:#b9c1c7;font-size:14px}
  #rx-ctaBar .btn{padding:10px 14px;border-radius:10px;border:none;font-weight:700;cursor:pointer}
  #rx-try{background:#00C2A8;color:#001015} #rx-contact{background:#1B2631;color:#EAF2F8;border:1px solid #2C3E50}
  @media (max-width:520px){#rx-ctaBar .left span{display:none}}
  /* Contact modal */
  #rx-back{position:fixed;inset:0;background:rgba(0,0,0,.5);display:none;z-index:9999}
  #rx-box{position:fixed;inset:auto 12px 12px 12px;max-width:560px;margin:auto;background:#0E1116;border:1px solid #263238;border-radius:14px;padding:16px;display:none;z-index:10000}
  #rx-box h3{margin:0 0 8px;font-size:18px;color:#EAF2F8}
  #rx-box label{font-size:13px;color:#b9c1c7}
  #rx-box input,#rx-box textarea{width:100%;margin:6px 0 12px;padding:10px;border-radius:10px;border:1px solid #25313B;background:#0B1116;color:#EAF2F8}
  #rx-send{background:#00C2A8;color:#001015} #rx-close{background:#1B2631;color:#EAF2F8;margin-left:8px}
  /* Footer l√©gal */
  footer#rx-legal{margin:48px 0 90px;padding:16px;border-top:1px solid #263238;color:#b9c1c7}
  .rx-legal-links{display:flex;flex-wrap:wrap;gap:12px;margin-bottom:10px}
  .rx-legal-links a{color:#EAF2F8;text-decoration:none;border:1px solid #2C3E50;padding:8px 10px;border-radius:10px}
  .rx-legal-box{margin-top:12px;background:#0B1116;border:1px solid #25313B;border-radius:12px;padding:12px}
  .rx-legal-box h4{margin:0 0 6px;color:#EAF2F8}
  .rx-legal-box p{margin:6px 0}
  .rx-legal-box details summary{cursor:pointer;color:#EAF2F8;margin:6px 0}
  /* Console Cr√©ateur */
  #rx-creatorBtn{position:fixed;right:12px;bottom:80px;background:#0E1116;border:1px solid #263238;color:#EAF2F8;border-radius:12px;padding:8px 10px;z-index:10001;cursor:pointer}
  #rx-creator{position:fixed;right:12px;bottom:130px;width:min(520px,95vw);max-height:70vh;overflow:auto;background:#0B1116;border:1px solid #25313B;border-radius:14px;padding:12px;z-index:10002;display:none}
  #rx-creator h3{margin:0 0 8px}
  .rx-alert{display:flex;gap:8px;align-items:flex-start;border:1px solid #2a3440;background:#0c141b;border-radius:10px;padding:8px;margin:6px 0}
  .rx-ok{border-color:#1f3d32;background:#0c1a14} .rx-warn{border-color:#3f361f;background:#1b140c} .rx-err{border-color:#3f1f1f;background:#1b0c0c}
  .rx-chip{display:inline-block;margin:6px 6px 0 0;padding:6px 10px;border-radius:999px;border:1px solid #2C3E50;background:#0E1116;color:#EAF2F8;cursor:pointer;font-size:12px}
  .rx-pin{display:flex;gap:8px;align-items:center;margin:8px 0}
  .rx-pin input{flex:1;padding:8px;border-radius:8px;border:1px solid #25313B;background:#0B1116;color:#EAF2F8}
</style>

<!-- Ancre #app (si absente, on l‚Äôajoute aussi via JS) -->
<section id="app" style="position:relative"></section>

<!-- CTA collant + Contact modal -->
<div id="rx-ctaBar" role="region" aria-label="Actions principales" style="display:none">
  <div class="left"><strong>Recallia</strong> <span>‚Äî Votre m√©moire IA</span></div>
  <div class="right">
    <button id="rx-try" class="btn">Essayer maintenant</button>
    <button id="rx-contact" class="btn">Contacter</button>
  </div>
</div>
<div id="rx-back"></div>
<div id="rx-box" role="dialog" aria-modal="true" aria-labelledby="rx-title">
  <h3 id="rx-title">Demander une d√©mo</h3>
  <form id="rx-form">
    <label>Nom</label><input name="name" required>
    <label>Email</label><input name="email" type="email" required>
    <label>Message</label><textarea name="message" rows="4" placeholder="Ex : Rappel m√©decin + envoi d‚Äôun mail‚Ä¶" required></textarea>
    <div style="display:flex;justify-content:flex-end">
      <button type="button" id="rx-close" class="btn">Fermer</button>
      <button type="submit" id="rx-send" class="btn">Envoyer</button>
    </div>
    <p id="rx-status" style="margin:8px 0 0;font-size:13px;color:#b9c1c7"></p>
  </form>
</div>

<!-- Footer l√©gal -->
<footer id="rx-legal">
  <div class="rx-legal-links">
    <a href="#rx-mentions">Mentions l√©gales</a>
    <a href="#rx-privacy">Confidentialit√©</a>
    <a href="mailto:jeason.bacoul@gmail.com?subject=Contact%20Recallia">Contact</a>
  </div>
  <div id="rx-mentions" class="rx-legal-box">
    <h4>Mentions l√©gales</h4>
    <p><strong>√âditeur :</strong> Recallia ‚Äî Micro-entreprise (remplacer par tes infos exactes).</p>
    <p><strong>Contact :</strong> jeason.bacoul@gmail.com</p>
    <p><strong>H√©bergement :</strong> GitHub Pages (GitHub Inc.).</p>
  </div>
  <div id="rx-privacy" class="rx-legal-box">
    <h4>Confidentialit√© (court)</h4>
    <details><summary>Ce que nous collectons</summary><p>Donn√©es fournies via le formulaire (nom, email, message). Pas de cookies publicitaires.</p></details>
    <details><summary>Usage</summary><p>R√©pondre aux demandes et am√©liorer le service. Aucune revente.</p></details>
    <details><summary>Droits</summary><p>Acc√®s / suppression sur demande par email.</p></details>
  </div>
  <p style="margin-top:10px">¬© <span id="rx-year"></span> Recallia. Tous droits r√©serv√©s.</p>
</footer>

<!-- Console Cr√©ateur (PIN + alertes + correctifs) -->
<button id="rx-creatorBtn" title="Cr√©ateur">üõ†Ô∏è Cr√©ateur</button>
<div id="rx-creator">
  <h3>Cr√©ateur ‚Äî Console</h3>
  <div class="rx-pin">
    <label for="rx-pin-input">PIN</label>
    <input id="rx-pin-input" placeholder="‚Ä¢‚Ä¢‚Ä¢‚Ä¢" inputmode="numeric" minlength="4" maxlength="6">
    <button class="rx-chip" id="rx-pin-check">D√©verrouiller</button>
  </div>
  <div id="rx-alerts"></div>
  <div id="rx-fixes" style="margin-top:8px"></div>
</div>

<script>
(function(){
  /* ===== Utilitaires ===== */
  const $ = s => document.querySelector(s);
  const head = document.head || document.getElementsByTagName('head')[0];
  const H = (tag, attrs={}, html='') => {
    const el=document.createElement(tag);
    Object.entries(attrs).forEach(([k,v])=>{ if(k==='style' && typeof v==='object'){Object.assign(el.style,v)} else el.setAttribute(k,v) });
    if(html) el.innerHTML = html;
    return el;
  };
  const insertBeforeFooter = (el)=>{
    const before = document.getElementById('rx-ctaBar') || document.getElementById('rx-legal') || document.body.lastElementChild;
    document.body.insertBefore(el, before);
  };

  /* ===== CTA + Contact ===== */
  const ctaBar = $('#rx-ctaBar'); ctaBar.style.display='flex';
  $('#rx-try')?.addEventListener('click',()=>{ (document.getElementById('app')||document.body).scrollIntoView({behavior:'smooth'}); });
  const back=$('#rx-back'), box=$('#rx-box'), open=()=>{back.style.display='block';box.style.display='block'}, close=()=>{back.style.display='none';box.style.display='none'};
  $('#rx-contact')?.addEventListener('click',open); $('#rx-close')?.addEventListener('click',close); back.addEventListener('click',close);
  $('#rx-form')?.addEventListener('submit',(e)=>{e.preventDefault();const d=new FormData(e.target);
    const nom=encodeURIComponent(d.get('name')||''), em=encodeURIComponent(d.get('email')||''), msg=encodeURIComponent(d.get('message')||'');
    window.location.href=`mailto:jeason.bacoul@gmail.com?subject=Demande%20d%C3%A9mo%20Recallia&body=Nom:%20${nom}%0AEmail:%20${em}%0A%0A${msg}`;
    $('#rx-status').textContent="Ouverture de votre messagerie‚Ä¶"; setTimeout(close,1200);
  });
  $('#rx-year').textContent = new Date().getFullYear();

  /* ===== SEO minimal (ajout si manquant) ===== */
  if(!document.querySelector('meta[name="description"]')) head.appendChild(H('meta', {name:'description', content:'Recallia rappelle, ex√©cute et prouve vos t√¢ches. Vous validez, on le fait.'}));
  if(!document.querySelector('link[rel="canonical"]')) head.appendChild(H('link',{rel:'canonical', href: location.href.split('?')[0]}));
  if(!document.querySelector('meta[property="og:title"]')) head.appendChild(H('meta',{property:'og:title',content:'Recallia ‚Äî Votre m√©moire IA'}));
  if(!document.querySelector('meta[property="og:description"]')) head.appendChild(H('meta',{property:'og:description',content:'Vous validez, on ex√©cute. Chaque action a une preuve (hash + journal).'}));
  if(!document.querySelector('meta[name="theme-color"]')) head.appendChild(H('meta',{name:'theme-color',content:getComputedStyle(document.documentElement).getPropertyValue('--accent')||'#00C2A8'}));
  // JSON-LD Organisation + Site
  if(!document.querySelector('script[data-ld="org"]')){
    head.appendChild(H('script',{'type':'application/ld+json','data-ld':'org'}, JSON.stringify({
      "@context":"https://schema.org","@type":"Organization","name":"Recallia",
      "url":location.origin+location.pathname,"logo":location.origin+location.pathname+"icon-512.png"
    })));
  }
  if(!document.querySelector('script[data-ld="website"]')){
    head.appendChild(H('script',{'type':'application/ld+json','data-ld':'website'}, JSON.stringify({
      "@context":"https://schema.org","@type":"WebSite","name":"Recallia",
      "url":location.origin+location.pathname,"potentialAction":{"@type":"SearchAction","target":location.origin+location.pathname+"?q={query}","query-input":"required name=query"}
    })));
  }

  /* ===== Sections manquantes : on injecte si absentes ===== */
  function ensureSection(id, html){ if(document.getElementById(id)) return; const s=H('section',{id, class:'rx-sec'}, html); insertBeforeFooter(s); }
  // Features
  ensureSection('rx-feat', `
    <div class="rx-wrap">
      <span class="rx-badge">Pourquoi Recallia</span>
      <h2 class="rx-title">Plus qu‚Äôun agenda : <em>m√©moire + action + preuve</em>.</h2>
      <p class="rx-sub">Vous validez, Recallia ex√©cute et livre un re√ßu horodat√© (hash + journal). Local-first, discret, fiable.</p>
      <div class="rx-grid rx-3">
        <div class="rx-card"><h3>üß† Rappelle</h3><p class="rx-sub">Anniversaires, RDV, paiements, papiers ‚Äî jamais oubli√©s.</p></div>
        <div class="rx-card"><h3>‚öôÔ∏è Ex√©cute</h3><p class="rx-sub">Email, RDV, attestation‚Ä¶ sous vos caps N0‚ÜíN3.</p></div>
        <div class="rx-card"><h3>‚úÖ Prouve</h3><p class="rx-sub">Re√ßu (JSON/PDF/EML/ICS) + SHA-256.</p></div>
        <div class="rx-card"><h3>üîí Sous contr√¥le</h3><p class="rx-sub">Fen√™tres, listes blanches, double confirmation, pause.</p></div>
        <div class="rx-card"><h3>‚ö° Rapide</h3><p class="rx-sub">TTV m√©dian vis√© &lt; 60 s.</p></div>
        <div class="rx-card"><h3>üß© √âvolutif</h3><p class="rx-sub">Domain Kits en &lt; 48 h (tests + conformit√©).</p></div>
      </div>
      <div class="rx-kpis" style="margin-top:12px">
        <div class="k"><b>&lt; 60 s</b><div class="rx-sub">Clic ‚Üí preuve</div></div>
        <div class="k"><b>90%+</b><div class="rx-sub">Taux de succ√®s</div></div>
        <div class="k"><b>100%</b><div class="rx-sub">Couverture de preuve</div></div>
      </div>
    </div>`);

  // Comment √ßa marche
  ensureSection('rx-how', `
    <div class="rx-wrap">
      <span class="rx-badge">En 3 √©tapes</span>
      <h2 class="rx-title">Dites l‚Äôintention ‚Üí validez ‚Üí recevez la preuve.</h2>
      <div class="rx-grid rx-3">
        <div class="rx-card"><h3>1) Propose</h3><ul class="rx-list"><li>Priorit√©s du jour (impact √ó p(succ√®s) √∑ temps √ó co√ªt)</li><li>Estimation claire</li></ul></div>
        <div class="rx-card"><h3>2) Ex√©cute</h3><ul class="rx-list"><li>Assist√©/auto selon N0‚ÜíN3</li><li>Respect des caps & listes blanches</li></ul></div>
        <div class="rx-card"><h3>3) Prouve</h3><ul class="rx-list"><li>Re√ßu horodat√© + hash</li><li>Journal d‚Äôaudit</li></ul></div>
      </div>
    </div>`);

  // Cas d‚Äôusage
  ensureSection('rx-cases', `
    <div class="rx-wrap">
      <span class="rx-badge">Cas d‚Äôusage</span>
      <h2 class="rx-title">Exemples concrets</h2>
      <div class="rx-grid rx-3">
        <div class="rx-card"><h3>üéÇ Anniversaires</h3><p class="rx-sub">Rappel + message pr√™t (ou envoi auto si valid√©).</p></div>
        <div class="rx-card"><h3>üè• RDV m√©decin</h3><p class="rx-sub">3 cr√©neaux, ICS, rappel veille.</p></div>
        <div class="rx-card"><h3>üí° Factures</h3><p class="rx-sub">Alerte, relance email, re√ßu archiv√©.</p></div>
        <div class="rx-card"><h3>üè† Maison</h3><p class="rx-sub">Lumi√®re, entretien chaudi√®re, assurances.</p></div>
        <div class="rx-card"><h3>üì¶ Retours/garanties</h3><p class="rx-sub">√âtiquette, suivi, preuve d‚Äôenvoi.</p></div>
        <div class="rx-card"><h3>üßæ Admin</h3><p class="rx-sub">Attestation, justificatif, accus√©.</p></div>
      </div>
    </div>`);

  // Preuve ‚Äî exemple JSON
  if(!document.getElementById('rx-proof')){
    const sec = H('section',{id:'rx-proof',class:'rx-sec'});
    const example = {id:"p_"+Date.now(),action_id:"rdv.medecin",title:"Prise de RDV ‚Äì Dr. Martin",kind:"ics",timestamp:new Date().toISOString(),sha256:"e3b0c44298...(ex)",result:{status:"success",notes:"RDV confirm√©. Fichier .ics g√©n√©r√©."}};
    sec.innerHTML = `<div class="rx-wrap"><span class="rx-badge">Preuve-ou-rien</span>
      <h2 class="rx-title">Chaque action r√©ussie a son re√ßu.</h2>
      <p class="rx-sub">Ci-dessous, un exemple de re√ßu JSON horodat√©. En prod, un SHA-256 r√©el est calcul√©.</p>
      <div class="rx-code" id="rx-proof-code"></div>
      <div style="margin-top:10px"><button class="rx-cta" id="rx-proof-copy">Copier le JSON</button></div></div>`;
    insertBeforeFooter(sec);
    document.getElementById('rx-proof-code').textContent = JSON.stringify(example,null,2);
    document.getElementById('rx-proof-copy')?.addEventListener('click',async()=>{try{await navigator.clipboard.writeText(document.getElementById('rx-proof-code').textContent);const b=document.getElementById('rx-proof-copy');b.textContent='Copi√© ‚úî';setTimeout(()=>b.textContent='Copier le JSON',1200);}catch(_){}})
  }

  // Avis
  ensureSection('rx-social', `
    <div class="rx-wrap">
      <span class="rx-badge">Ils en parlent</span>
      <h2 class="rx-title">Des utilisateurs rassur√©s par la preuve.</h2>
      <div class="rx-grid rx-3">
        <div class="rx-card"><p>‚ÄúValid√© ‚Üí 40 s plus tard, preuve de r√©servation. Bluffant.‚Äù</p><span class="rx-badge" style="background:var(--accent);color:#001015">TTV 40 s</span></div>
        <div class="rx-card"><p>‚ÄúRe√ßu JSON + email envoy√©, clair et v√©rifiable.‚Äù</p><span class="rx-badge" style="background:var(--accent);color:#001015">Preuve 100%</span></div>
        <div class="rx-card"><p>‚ÄúJ‚Äôai arr√™t√© d‚Äôoublier les √©ch√©ances ‚Äî et j‚Äôai les traces.‚Äù</p><span class="rx-badge" style="background:var(--accent);color:#001015">Z√©ro oubli</span></div>
      </div>
    </div>`);

  // Pricing + FAQ
  ensureSection('rx-pricing', `
    <div class="rx-wrap">
      <span class="rx-badge">Tarifs (b√™ta)</span>
      <h2 class="rx-title">Commencez gratuit. Passez Pro quand vous voulez.</h2>
      <div class="rx-grid rx-3">
        <div class="rx-card"><h3>Gratuit</h3><ul class="rx-list"><li>Rappels essentiels</li><li>Actions assist√©es</li><li>Preuves limit√©es</li></ul><button class="rx-cta" onclick="document.getElementById('app').scrollIntoView({behavior:'smooth'})">Essayer</button></div>
        <div class="rx-card" style="border-color:var(--accent)"><h3>Pro</h3><ul class="rx-list"><li>Actions auto N0‚ÜíN3</li><li>Preuves illimit√©es</li><li>Domain Kits avanc√©s</li></ul><button class="rx-cta">Rejoindre la liste</button></div>
        <div class="rx-card"><h3>Team</h3><ul class="rx-list"><li>Comptes multi</li><li>Approbations & journal</li><li>Support prioritaire</li></ul><button class="rx-cta rx-ghost" onclick="document.getElementById('rx-contact').click()">Contacter</button></div>
      </div>
    </div>`);
  ensureSection('rx-faq', `
    <div class="rx-wrap">
      <span class="rx-badge">FAQ</span>
      <h2 class="rx-title">Questions fr√©quentes</h2>
      <div class="rx-grid rx-2">
        <div class="rx-card"><h3>Recallia vs Google Agenda ?</h3><p class="rx-sub">Agenda = rappels. Recallia = rappels + ex√©cution + preuve (re√ßus horodat√©s).</p></div>
        <div class="rx-card"><h3>Mes donn√©es ?</h3><p class="rx-sub">Local-first. Export & suppression. Aucune revente.</p></div>
        <div class="rx-card"><h3>Qui valide ?</h3><p class="rx-sub">Toujours vous. Niveaux N0‚ÜíN3 + caps + double confirmation.</p></div>
        <div class="rx-card"><h3>Mobile ?</h3><p class="rx-sub">Oui. PWA (installation) quand manifest/ic√¥nes finalis√©s.</p></div>
      </div>
    </div>`);

  /* ===== Console Cr√©ateur : PIN, alertes, correctifs ===== */
  const creatorBtn = $('#rx-creatorBtn'), creator = $('#rx-creator');
  const PIN = localStorage.getItem('recallia.pin') || '4242'; // change-le plus tard
  const showCreator = () => creator.style.display = 'block';
  // ouverture si ?creator=on ou triple-clic sur le logo
  if (new URLSearchParams(location.search).get('creator')==='on') showCreator();
  creatorBtn.addEventListener('click', showCreator);

  function diag(){
    const d = {
      hasH1: !!document.querySelector('h1'),
      hasApp: !!document.getElementById('app'),
      hasCTA: !!document.getElementById('rx-ctaBar'),
      hasLegal: !!document.getElementById('rx-legal'),
      hasFeat: !!document.getElementById('rx-feat'),
      hasHow: !!document.getElementById('rx-how'),
      hasCases: !!document.getElementById('rx-cases'),
      hasProof: !!document.getElementById('rx-proof'),
      hasPricing: !!document.getElementById('rx-pricing'),
      hasFAQ: !!document.getElementById('rx-faq'),
      hasDesc: !!document.querySelector('meta[name="description"]'),
      hasOG: !!document.querySelector('meta[property="og:title"]'),
      manifestLink: document.querySelector('link[rel="manifest"]')?.getAttribute('href')||null
    };
    return d;
  }
  function renderAlerts(){
    const d = diag(); const box = $('#rx-alerts'); box.innerHTML='';
    const items = [];
    if(!d.hasH1) items.push({t:"H1 manquant (h√©ros)",lvl:'err',fix:'hero'});
    if(!d.hasDesc||!d.hasOG) items.push({t:"M√©ta SEO incompl√®tes (description/OG)",lvl:'warn',fix:'seo'});
    if(!d.hasFeat||!d.hasHow||!d.hasCases) items.push({t:"Sections valeur/fonctionnement/cas d‚Äôusage incompl√®tes",lvl:'warn',fix:'sections'});
    if(!d.hasProof) items.push({t:"Bloc ‚ÄúPreuve‚Äù absent",lvl:'warn',fix:'proof'});
    if(!d.hasPricing||!d.hasFAQ) items.push({t:"Pricing/FAQ absents",lvl:'warn',fix:'sections'});
    if(!d.hasLegal) items.push({t:"Footer l√©gal minimal absent",lvl:'warn',fix:'legal'});
    if(!d.hasCTA) items.push({t:"CTA collant (Essayer/Contacter) absent",lvl:'warn',fix:'cta'});
    if(!d.hasApp) items.push({t:"Ancre #app manquante (pour le scroll du CTA)",lvl:'warn',fix:'app'});
    if(d.manifestLink) items.push({t:`Manifest d√©tect√©: ${d.manifestLink} (on le reprendra demain avec Cloudflare)`,lvl:'ok',fix:null});
    if(items.length===0) items.push({t:"Tout est en place c√¥t√© structure. Prochaine √©tape : PWA & ic√¥nes.",lvl:'ok'});
    for(const it of items){
      const div = H('div',{class:`rx-alert rx-${it.lvl}`}, `<div>‚Ä¢ ${it.t}</div>`); box.appendChild(div);
    }
    const fixes = $('#rx-fixes'); fixes.innerHTML='';
    [
      {id:'fix-hero',label:'Proposer un H1 + sous-titre + CTA',fn:()=>proposeHero()},
      {id:'apply-hero',label:'Appliquer la proposition',fn:()=>applyHero()},
      {id:'fix-sections',label:'Ajouter sections manquantes',fn:()=>{}}, // d√©j√† inject√©es ci-dessus
      {id:'fix-cta',label:'(R√©)activer la barre CTA',fn:()=>{document.getElementById('rx-ctaBar').style.display='flex'}},
      {id:'fix-legal',label:'(R√©)ins√©rer le footer l√©gal',fn:()=>{}}, // d√©j√† pr√©sent
      {id:'fix-seo',label:'Ajouter/mettre √† jour m√©ta SEO',fn:()=>{}},
      {id:'fix-app',label:'Cr√©er ancre #app',fn:()=>{if(!document.getElementById('app')){const a=H('section',{id:'app'});document.body.insertBefore(a,document.body.firstChild)}}}
    ].forEach(b=>{ const el=H('button',{class:'rx-chip',id:b.id},b.label); el.addEventListener('click',b.fn); fixes.appendChild(el); });
  }

  // Proposer/Appliquer contenu h√©ros (l√©ger)
  function proposeHero(){
    const ideas = [
      {t:'Recallia ‚Äî Votre m√©moire IA', s:'Vous validez, on ex√©cute. Chaque action a une preuve.', c:'Essayer maintenant', a:'#00C2A8'},
      {t:'Rappelle, ex√©cute, prouve.', s:'Anniversaires, RDV, factures ‚Äî z√©ro oubli, re√ßus horodat√©s.', c:'Voir un exemple de preuve', a:'#60A5FA'}
    ];
    localStorage.setItem('recallia.hero.proposal', JSON.stringify(ideas[Math.floor(Math.random()*ideas.length)]));
    alert('Proposition h√©ros pr√™te. Cliquez ‚ÄúAppliquer la proposition‚Äù.');
  }
  function applyHero(){
    const p = JSON.parse(localStorage.getItem('recallia.hero.proposal')||'{}');
    const h1 = document.querySelector('h1') || (()=>{
      const hh=H('h1',{},'Recallia ‚Äî Votre m√©moire IA');
      const anchor=document.getElementById('app')||document.body; anchor.parentNode.insertBefore(hh, anchor.nextSibling); return hh;
    })();
    const sub = h1.nextElementSibling && h1.nextElementSibling.tagName==='P'? h1.nextElementSibling : h1.parentNode.insertBefore(H('p',{class:'rx-sub'}), h1.nextSibling);
    const cta = document.querySelector('a.btn,.cta a, #rx-try') || document.getElementById('rx-try');
    if(p.t) h1.textContent=p.t; if(p.s) sub.textContent=p.s; if(p.c && cta) cta.textContent=p.c;
    if(p.a){ document.documentElement.style.setProperty('--accent', p.a); let m=document.querySelector('meta[name="theme-color"]'); if(!m){m=H('meta',{name:'theme-color',content:p.a}); head.appendChild(m);} else m.content=p.a; }
    renderAlerts();
  }

  // PIN
  $('#rx-pin-check').addEventListener('click', ()=>{
    const ok = ($('#rx-pin-input').value||'').trim() === PIN;
    if(!ok){ alert('PIN incorrect'); return; }
    alert('Cr√©ateur d√©verrouill√© ‚úÖ'); renderAlerts();
  });

  renderAlerts();
})();
</script>
<!-- ===== /SuperPatch v4 ===== --><!-- ===== /SITE BOOST PACK v3 ===== --><!-- ===== /PATCH COMPLET v2 ===== --><!-- ===== /Assist v2 ===== --><!-- ===== /Correctif global ===== -->
</body>
  </html>
